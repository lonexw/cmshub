(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f098c4aa"],{"0003":function(e,t,a){},"1a70":function(e,t,a){"use strict";var n=a("0003"),i=a.n(n);i.a},4087:function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userProjects"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userProjects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NamedType",name:{kind:"Name",value:"ProjectInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userUpdateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NamedType",name:{kind:"Name",value:"ProjectInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:346}};a.loc.source={body:"query userProjects {\n  userProjects {\n    id,\n    name,\n    description,\n    url\n  }\n}\n\nmutation userCreateProject($data: ProjectInput) {\n  userCreateProject(data: $data) {\n    description,\n    name,\n    id,\n    url\n  }\n}\n\nmutation userUpdateProject($data: ProjectInput) {\n  userUpdateProject (data: $data) {\n    id, name, description, url\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function r(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}function o(e,t){var a={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var n=i[t]||new Set,o=new Set,s=new Set;n.forEach((function(e){s.add(e)}));while(s.size>0){var c=s;s=new Set,c.forEach((function(e){if(!o.has(e)){o.add(e);var t=i[e]||new Set;t.forEach((function(e){s.add(e)}))}}))}return o.forEach((function(t){var n=r(e,t);n&&a.definitions.push(n)})),a}(function(){a.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}}))})(),e.exports=a,e.exports["userProjects"]=o(a,"userProjects"),e.exports["userCreateProject"]=o(a,"userCreateProject"),e.exports["userUpdateProject"]=o(a,"userUpdateProject")},4118:function(e,t,a){},4760:function(e,t,a){"use strict";var n=a("4118"),i=a.n(n);i.a},"7b3c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",{staticClass:"project-header text-center text-xxxxl padding-xxs text-black"},[n("logo")],1),n("div",{staticClass:"project-body"},[e.is_create?n("project-create",{attrs:{"form-data":e.formData},on:{cancel:e.cancelCreate}}):n("project-list",{on:{create:e.create,update:e.update}})],1),n("footer",{staticClass:"solid-top padding-xxs project-footer"},[n("a-popover",{attrs:{placement:"topLeft"}},[n("template",{slot:"content"},[n("div",[n("a-button",{attrs:{type:"link"},on:{click:function(t){e.updatePwdVisible=!0}}},[n("a-icon",{attrs:{type:"edit"}}),e._v("修改密码")],1)],1),n("div",[n("a-button",{attrs:{type:"link"},on:{click:e.logout}},[n("a-icon",{attrs:{type:"logout"}}),e._v("退出")],1)],1)]),n("img",{staticClass:"margin-left round pointer",attrs:{src:a("9b19"),width:"40px"}})],2)],1),n("a-modal",{attrs:{title:"修改密码"},on:{ok:e.updatePwdSubmit},model:{value:e.updatePwdVisible,callback:function(t){e.updatePwdVisible=t},expression:"updatePwdVisible"}},[n("a-form-model",{attrs:{model:e.formPwd,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[n("a-form-model-item",{attrs:{label:"原密码"}},[n("a-input",{attrs:{type:"password"},model:{value:e.formPwd.old_password,callback:function(t){e.$set(e.formPwd,"old_password",t)},expression:"formPwd.old_password"}})],1),n("a-form-model-item",{attrs:{label:"新密码"}},[n("a-input",{attrs:{type:"password"},model:{value:e.formPwd.password,callback:function(t){e.$set(e.formPwd,"password",t)},expression:"formPwd.password"}})],1),n("a-form-model-item",{attrs:{label:"确认密码"}},[n("a-input",{attrs:{type:"password"},model:{value:e.formPwd.password_confirmation,callback:function(t){e.$set(e.formPwd,"password_confirmation",t)},expression:"formPwd.password_confirmation"}})],1)],1)],1)],1)},i=[],r=(a("d3b7"),a("5530")),o=a("1101"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("router-link",{attrs:{to:{name:"Index"}}},[n("img",{attrs:{src:a("9b19")}}),e.showTitle?n("h1",[e._v(e._s(e.title))]):e._e()])],1)},c=[],l={name:"Logo",components:{},props:{title:{type:String,default:"CMS Hub",required:!1},showTitle:{type:Boolean,default:!0,required:!1}}},d=l,u=a("2877"),m=Object(u["a"])(d,s,c,!1,null,null,null),f=m.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",{staticClass:"text-lg margin-bottom"},[e._v("我的项目")]),a("div",{staticClass:"flex flex-wrap"},[e._l(e.list,(function(t,n){return[a("a-dropdown",{key:n},[a("div",{key:n,staticClass:"project",on:{click:function(a){return e.goSchema(t)}}},[t.url||""==t.url?a("div",[a("a-avatar",{staticClass:"icon",attrs:{src:t.url}})],1):a("div",{staticClass:"icon"},[e._v(e._s(t.name))]),a("div",{staticClass:"margin-top text-bold text-black"},[e._v(e._s(t.name))])]),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return e.update(t)}}},[e._v("编辑")])])],1)],1)]})),a("div",{staticClass:"project",on:{click:e.create}},[a("a-icon",{staticClass:"add-icon",attrs:{type:"plus-circle"}}),a("div",{staticClass:"margin-top text-bold text-black"},[e._v("创建新项目")])],1)],2)])},v=[],b=a("4087"),k=a("ca00"),h=a("4360"),g={components:{},data:function(){return{list:[]}},created:function(){this.getList()},methods:{create:function(){this.$emit("create")},update:function(e){this.$emit("update",e)},goSchema:function(e){var t=this;h["a"].dispatch("SetCurrentProject",e).then((function(){t.$router.push({name:"Content"})}))},getList:function(){var e=this,t=this;t.$apollo.query({query:b["userProjects"],variables:{},fetchPolicy:"no-cache"}).then((function(e){t.list=e.data.userProjects})).catch((function(t){e.$message.warning(Object(k["a"])(t.message))}))}}},w=g,P=(a("4760"),Object(u["a"])(w,p,v,!1,null,"28b642a2",null)),j=P.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",{staticClass:"text-lg margin-bottom"},[e._v("创建新项目")]),a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},on:{submit:e.handleSubmit}},[a("a-form-model-item",{attrs:{label:"项目名称",prop:"name"}},[a("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("a-form-model-item",{attrs:{label:"项目描述",prop:"description"}},[a("a-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("a-form-model-item",{attrs:{label:"logo",prop:"url"}},[a("upload-image",{attrs:{uploadText:"上传图片"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),a("div",{staticClass:"flex justify-center margin-top"},[a("a-button",{attrs:{type:"link",loading:e.submit_loading},on:{click:e.cancel}},[e._v("取消")]),a("a-button",{attrs:{type:"primary",loading:e.submit_loading},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.formData&&e.formData.id>0?"保存":"创建")+" ")])],1)],1)],1)},y=[],_=(a("a4d3"),a("e01a"),a("b0c0"),a("2af9")),C={components:{UploadImage:_["i"]},props:{formData:{type:Object,default:function(){return{}}}},data:function(){return{form:{},labelCol:{span:4},wrapperCol:{span:14},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],description:[{required:!1,message:"请输入项目描述",trigger:"blur"}]},submit_loading:!1}},created:function(){this.form=Object.assign({},this.formData)},methods:{cancel:function(){this.$emit("cancel")},goSchema:function(){this.$router.push({name:"Schema"})},handleSubmit:function(){var e=this,t=this;this.$refs.ruleForm.validate((function(a){if(a){if(t.submit_loading)return;t.submit_loading=!0,t.$apollo.mutate({mutation:t.formData&&t.formData.id>0?b["userUpdateProject"]:b["userCreateProject"],variables:{data:{id:t.formData&&t.formData.id>0?t.formData.id:"",name:t.form.name,description:t.form.description,url:t.form.url}},fetchPolicy:"no-cache"}).then((function(a){h["a"].dispatch("SetCurrentProject",t.formData&&t.formData.id>0?a.data.userUpdateProject:a.data.userCreateProject).then((function(){e.$router.push({name:"Schema"})})),e.goSchema()})).catch((function(t){e.$message.warning(Object(k["a"])(t.message))})).finally((function(){t.submit_loading=!1}))}}))}}},x=C,$=(a("82bd"),Object(u["a"])(x,S,y,!1,null,"2238d75a",null)),N=$.exports,D=a("2f62"),F=a("9408"),O=a("f5b5"),E={components:{Logo:f,ProjectList:j,ProjectCreate:N},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},domTitle:o["a"],is_create:!1,updatePwdVisible:!1,formData:{},formPwd:{}}},created:function(){},methods:Object(r["a"])({},Object(D["b"])(["Logout"]),{create:function(){this.formData={},this.is_create=!0},update:function(e){this.formData=e,this.is_create=!0},cancelCreate:function(){this.is_create=!1},logout:function(){var e=this;this.$confirm({title:"确认退出吗？",confirmLoading:!0,onOk:function(){e.$apollo.query({query:F["userLogout"],variables:{}}).finally((function(){e.Logout({}).finally((function(){setTimeout((function(){window.location.reload()}),16)}))}))}})},updatePwdSubmit:function(){var e=this,t=this;t.$apollo.mutate({mutation:O["userUpdatePwd"],variables:{data:t.formPwd},fetchPolicy:"no-cache"}).then((function(){e.$message.success("保存成功"),t.formPwd={}})).catch((function(t){e.$message.warning(Object(k["a"])(t.message))}))}})},V=E,q=(a("1a70"),a("af6a"),Object(u["a"])(V,n,i,!1,null,"077c7400",null));t["default"]=q.exports},"82bd":function(e,t,a){"use strict";var n=a("b91b"),i=a.n(n);i.a},af6a:function(e,t,a){"use strict";var n=a("bbe2"),i=a.n(n);i.a},b91b:function(e,t,a){},bbe2:function(e,t,a){},e01a:function(e,t,a){"use strict";var n=a("23e7"),i=a("83ab"),r=a("da84"),o=a("5135"),s=a("861d"),c=a("9bf2").f,l=a("e893"),d=r.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};l(m,d);var f=m.prototype=d.prototype;f.constructor=m;var p=f.toString,v="Symbol(test)"==String(d("test")),b=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(o(u,e))return"";var a=v?t.slice(7,-1):t.replace(b,"$1");return""===a?void 0:a}}),n({global:!0,forced:!0},{Symbol:m})}}}]);