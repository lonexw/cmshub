(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8da5f85a"],{"0003":function(e,t,i){},"1a70":function(e,t,i){"use strict";var a=i("0003"),n=i.n(a);n.a},4087:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userProjects"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userProjects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userUpdateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:495}};i.loc.source={body:"query userProjects {\n  userProjects {\n    id,\n    name,\n    description\n  }\n}\n\nmutation userCreateProject($id: ID, $name: String!, $description: String) {\n  userCreateProject(data: {\n    id: $id,\n    name: $name,\n    description: $description\n  }) {\n    description,\n    name,\n    id\n  }\n}\n\nmutation userUpdateProject($id: ID, $name: String!, $description: String) {\n  userUpdateProject (data: {\n    id: $id,\n    name: $name,\n    description: $description\n  }) {\n    id, name, description\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){a(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){a(e,t)})),e.definitions&&e.definitions.forEach((function(e){a(e,t)}))}var n={};function r(e,t){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==t)return a}}function o(e,t){var i={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;a.forEach((function(e){s.add(e)}));while(s.size>0){var c=s;s=new Set,c.forEach((function(e){if(!o.has(e)){o.add(e);var t=n[e]||new Set;t.forEach((function(e){s.add(e)}))}}))}return o.forEach((function(t){var a=r(e,t);a&&i.definitions.push(a)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var t=new Set;a(e,t),n[e.name.value]=t}}))})(),e.exports=i,e.exports["userProjects"]=o(i,"userProjects"),e.exports["userCreateProject"]=o(i,"userCreateProject"),e.exports["userUpdateProject"]=o(i,"userUpdateProject")},"4ee0":function(e,t,i){},"6bd0":function(e,t,i){},"7b3c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header",{staticClass:"project-header text-center text-xxxxl padding-xxs text-black"},[a("logo")],1),a("div",{staticClass:"project-body"},[e.is_create?a("project-create",{attrs:{"form-data":e.formData},on:{cancel:e.cancelCreate}}):a("project-list",{on:{create:e.create,update:e.update}})],1),a("footer",{staticClass:"solid-top padding-xxs project-footer"},[a("a-popover",{attrs:{placement:"topLeft"}},[a("template",{slot:"content"},[a("a-button",{attrs:{type:"link"},on:{click:e.logout}},[a("a-icon",{attrs:{type:"logout"}}),e._v("退出")],1)],1),a("img",{staticClass:"margin-left round pointer",attrs:{src:i("9b19"),width:"40px"}})],2)],1)])},n=[],r=(i("d3b7"),i("5530")),o=i("1101"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("router-link",{attrs:{to:{name:"Index"}}},[a("img",{attrs:{src:i("9b19")}}),e.showTitle?a("h1",[e._v(e._s(e.title))]):e._e()])],1)},c=[],d={name:"Logo",components:{},props:{title:{type:String,default:"CMS Hub",required:!1},showTitle:{type:Boolean,default:!0,required:!1}}},l=d,u=i("2877"),m=Object(u["a"])(l,s,c,!1,null,null,null),f=m.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h1",{staticClass:"text-lg margin-bottom"},[e._v("我的项目")]),i("div",{staticClass:"flex flex-wrap"},[e._l(e.list,(function(t,a){return[i("a-dropdown",{key:a},[i("div",{key:a,staticClass:"project",on:{click:function(i){return e.goSchema(t)}}},[i("div",{staticClass:"icon"},[e._v(e._s(t.name))]),i("div",{staticClass:"margin-top text-bold text-black"},[e._v(e._s(t.name))])]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return e.update(t)}}},[e._v("编辑")])])],1)],1)]})),i("div",{staticClass:"project",on:{click:e.create}},[i("a-icon",{staticClass:"add-icon",attrs:{type:"plus-circle"}}),i("div",{staticClass:"margin-top text-bold text-black"},[e._v("创建新项目")])],1)],2)])},p=[],k=i("4087"),b=i("ca00"),h=i("4360"),g={components:{},data:function(){return{list:[]}},created:function(){this.getList()},methods:{create:function(){this.$emit("create")},update:function(e){this.$emit("update",e)},goSchema:function(e){var t=this;h["a"].dispatch("SetCurrentProject",e).then((function(){t.$router.push({name:"Content"})}))},getList:function(){var e=this,t=this;t.$apollo.query({query:k["userProjects"],variables:{},fetchPolicy:"no-cache"}).then((function(e){t.list=e.data.userProjects})).catch((function(t){e.$message.warning(Object(b["a"])(t.message))}))}}},j=g,y=(i("da3d"),Object(u["a"])(j,v,p,!1,null,"5842cb68",null)),N=y.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h1",{staticClass:"text-lg margin-bottom"},[e._v("创建新项目")]),i("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[i("a-row",{attrs:{gutter:32}},[i("a-col",{attrs:{span:12}},[i("a-form-item",{attrs:{label:"项目名称"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.formData?e.formData.name:"",rules:[{required:!0,message:"请输入项目名称"}]}],expression:"[\n              'name',\n              {\n                initialValue: formData ? formData.name : '',\n                rules: [{ required: true, message: '请输入项目名称' }]\n              }\n            ]"}],attrs:{size:"large"}})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-item",{attrs:{label:"项目描述"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{initialValue:e.formData?e.formData.description:"",rules:[{required:!1,message:"请输入项目描述"}]}],expression:"[\n              'description',\n              {\n                initialValue: formData ? formData.description : '',\n                rules: [{ required: false, message: '请输入项目描述' }]\n              }\n            ]"}],attrs:{size:"large"}})],1)],1)],1),i("div",{staticClass:"flex justify-center margin-top"},[i("a-button",{staticClass:"margin-right",attrs:{type:"link",loading:e.submit_loading},on:{click:e.cancel}},[e._v("取消")]),i("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.submit_loading}},[e._v(" "+e._s(e.formData&&e.formData.id>0?"保存":"创建")+" ")])],1)],1)],1)},D=[],x=(i("a4d3"),i("e01a"),i("b0c0"),{components:{},props:{formData:{type:Object,default:function(){return{}}}},data:function(){return{form:this.$form.createForm(this),submit_loading:!1}},created:function(){},methods:{cancel:function(){this.$emit("cancel")},goSchema:function(){this.$router.push({name:"Schema"})},handleSubmit:function(e){var t=this;e.preventDefault();var i=this;this.form.validateFields((function(e,a){e||i.$apollo.mutate({mutation:i.formData&&i.formData.id>0?k["userUpdateProject"]:k["userCreateProject"],variables:{id:i.formData&&i.formData.id>0?i.formData.id:"",name:a.name,description:a.description},fetchPolicy:"no-cache"}).then((function(e){h["a"].dispatch("SetCurrentProject",i.formData&&i.formData.id>0?e.data.userUpdateProject:e.data.userCreateProject).then((function(){t.$router.push({name:"Schema"})})),t.goSchema()})).catch((function(e){t.$message.warning(Object(b["a"])(e.message))}))}))}}}),_=x,C=(i("c0da"),Object(u["a"])(_,S,D,!1,null,"6a28bfa4",null)),P=C.exports,$=i("2f62"),w=i("9408"),V={components:{Logo:f,ProjectList:N,ProjectCreate:P},data:function(){return{domTitle:o["a"],is_create:!1,formData:{}}},created:function(){},methods:Object(r["a"])({},Object($["b"])(["Logout"]),{create:function(){this.formData={},this.is_create=!0},update:function(e){this.formData=e,this.is_create=!0},cancelCreate:function(){this.is_create=!1},logout:function(){var e=this;this.$confirm({title:"确认退出吗？",confirmLoading:!0,onOk:function(){e.$apollo.query({query:w["userLogout"],variables:{}}).finally((function(){e.Logout({}).finally((function(){setTimeout((function(){window.location.reload()}),16)}))}))}})}})},O=V,F=(i("1a70"),i("b087"),Object(u["a"])(O,a,n,!1,null,"cf5714ca",null));t["default"]=F.exports},b087:function(e,t,i){"use strict";var a=i("fb1c"),n=i.n(a);n.a},c0da:function(e,t,i){"use strict";var a=i("4ee0"),n=i.n(a);n.a},ca00:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("ac1f"),i("5319");function a(e){return e.replace(/GraphQL error:/,"")}},da3d:function(e,t,i){"use strict";var a=i("6bd0"),n=i.n(a);n.a},e01a:function(e,t,i){"use strict";var a=i("23e7"),n=i("83ab"),r=i("da84"),o=i("5135"),s=i("861d"),c=i("9bf2").f,d=i("e893"),l=r.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var u={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new l(e):void 0===e?l():l(e);return""===e&&(u[t]=!0),t};d(m,l);var f=m.prototype=l.prototype;f.constructor=m;var v=f.toString,p="Symbol(test)"==String(l("test")),k=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=v.call(e);if(o(u,e))return"";var i=p?t.slice(7,-1):t.replace(k,"$1");return""===i?void 0:i}}),a({global:!0,forced:!0},{Symbol:m})}},fb1c:function(e,t,i){}}]);