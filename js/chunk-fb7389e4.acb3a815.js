(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb7389e4"],{"073f":function(e,n,i){},"129f":function(e,n){e.exports=Object.is||function(e,n){return e===n?0!==e||1/e===1/n:e!=e&&n!=n}},"28e9":function(e,n,i){"use strict";var t=i("073f"),a=i.n(t);a.a},"34d6":function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userAssets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paginator"}},type:{kind:"NamedType",name:{kind:"Name",value:"PaginatorInput"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"more"}},type:{kind:"NamedType",name:{kind:"Name",value:"AssetPaginatorInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userAssets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paginator"},value:{kind:"Variable",name:{kind:"Name",value:"paginator"}}},{kind:"Argument",name:{kind:"Name",value:"more"},value:{kind:"Variable",name:{kind:"Name",value:"more"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:246}};i.loc.source={body:"query userAssets($paginator: PaginatorInput\n  $more: AssetPaginatorInput) {\n  userAssets(paginator: $paginator\n    more: $more) {\n    items {\n      id,\n      name,\n      url,\n      file_size,\n      type\n    },\n    cursor {\n      total\n    }\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var a={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function o(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=a[n]||new Set,o=new Set,s=new Set;t.forEach((function(e){s.add(e)}));while(s.size>0){var d=s;s=new Set,d.forEach((function(e){if(!o.has(e)){o.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return o.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),a[e.name.value]=n}}))})(),e.exports=i,e.exports["userAssets"]=o(i,"userAssets")},"3ca3":function(e,n,i){"use strict";var t=i("6547").charAt,a=i("69f3"),r=i("7dd0"),o="String Iterator",s=a.set,d=a.getterFor(o);r(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,n=d(this),i=n.string,a=n.index;return a>=i.length?{value:void 0,done:!0}:(e=t(i,a),n.index+=e.length,{value:e,done:!1})}))},4087:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userProjects"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userProjects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userUpdateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:495}};i.loc.source={body:"query userProjects {\n  userProjects {\n    id,\n    name,\n    description\n  }\n}\n\nmutation userCreateProject($id: ID, $name: String!, $description: String) {\n  userCreateProject(data: {\n    id: $id,\n    name: $name,\n    description: $description\n  }) {\n    description,\n    name,\n    id\n  }\n}\n\nmutation userUpdateProject($id: ID, $name: String!, $description: String) {\n  userUpdateProject (data: {\n    id: $id,\n    name: $name,\n    description: $description\n  }) {\n    id, name, description\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var a={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function o(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=a[n]||new Set,o=new Set,s=new Set;t.forEach((function(e){s.add(e)}));while(s.size>0){var d=s;s=new Set,d.forEach((function(e){if(!o.has(e)){o.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return o.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),a[e.name.value]=n}}))})(),e.exports=i,e.exports["userProjects"]=o(i,"userProjects"),e.exports["userCreateProject"]=o(i,"userCreateProject"),e.exports["userUpdateProject"]=o(i,"userUpdateProject")},"4df4":function(e,n,i){"use strict";var t=i("0366"),a=i("7b0b"),r=i("9bdd"),o=i("e95a"),s=i("50c4"),d=i("8418"),c=i("35a1");e.exports=function(e){var n,i,l,u,m,f,v=a(e),p="function"==typeof this?this:Array,k=arguments.length,g=k>1?arguments[1]:void 0,h=void 0!==g,b=c(v),S=0;if(h&&(g=t(g,k>2?arguments[2]:void 0,2)),void 0==b||p==Array&&o(b))for(n=s(v.length),i=new p(n);n>S;S++)f=h?g(v[S],S):v[S],d(i,S,f);else for(u=b.call(v),m=u.next,i=new p;!(l=m.call(u)).done;S++)f=h?r(u,g,[l.value,S],!0):l.value,d(i,S,f);return i.length=S,i}},5891:function(e,n,i){},7702:function(e,n,i){"use strict";var t=i("5891"),a=i.n(t);a.a},"841c":function(e,n,i){"use strict";var t=i("d784"),a=i("825a"),r=i("1d80"),o=i("129f"),s=i("14c3");t("search",1,(function(e,n,i){return[function(n){var i=r(this),t=void 0==n?void 0:n[e];return void 0!==t?t.call(n,i):new RegExp(n)[e](String(i))},function(e){var t=i(n,e,this);if(t.done)return t.value;var r=a(e),d=String(this),c=r.lastIndex;o(c,0)||(r.lastIndex=0);var l=s(r,d);return o(r.lastIndex,c)||(r.lastIndex=c),null===l?-1:l.index}]}))},a434:function(e,n,i){"use strict";var t=i("23e7"),a=i("23cb"),r=i("a691"),o=i("50c4"),s=i("7b0b"),d=i("65f0"),c=i("8418"),l=i("1dde"),u=i("ae40"),m=l("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,p=Math.min,k=9007199254740991,g="Maximum allowed length exceeded";t({target:"Array",proto:!0,forced:!m||!f},{splice:function(e,n){var i,t,l,u,m,f,h=s(this),b=o(h.length),S=a(e,b),y=arguments.length;if(0===y?i=t=0:1===y?(i=0,t=b-S):(i=y-2,t=p(v(r(n),0),b-S)),b+i-t>k)throw TypeError(g);for(l=d(h,t),u=0;u<t;u++)m=S+u,m in h&&c(l,u,h[m]);if(l.length=t,i<t){for(u=S;u<b-t;u++)m=u+t,f=u+i,m in h?h[f]=h[m]:delete h[f];for(u=b;u>b-t+i;u--)delete h[u-1]}else if(i>t)for(u=b-t;u>S;u--)m=u+t-1,f=u+i-1,m in h?h[f]=h[m]:delete h[f];for(u=0;u<i;u++)h[u+S]=arguments[u+2];return h.length=b-t+i,l}})},a630:function(e,n,i){var t=i("23e7"),a=i("4df4"),r=i("1c7e"),o=!r((function(e){Array.from(e)}));t({target:"Array",stat:!0,forced:o},{from:a})},ca00:function(e,n,i){"use strict";i.d(n,"a",(function(){return t}));i("ac1f"),i("5319");function t(e){return e.replace(/GraphQL error:/,"")}},d28b:function(e,n,i){var t=i("746f");t("iterator")},d463:function(e,n,i){"use strict";var t=i("e152"),a=i.n(t);a.a},ddb0:function(e,n,i){var t=i("da84"),a=i("fdbc"),r=i("e260"),o=i("9112"),s=i("b622"),d=s("iterator"),c=s("toStringTag"),l=r.values;for(var u in a){var m=t[u],f=m&&m.prototype;if(f){if(f[d]!==l)try{o(f,d,l)}catch(p){f[d]=l}if(f[c]||o(f,c,u),a[u])for(var v in r)if(f[v]!==r[v])try{o(f,v,r[v])}catch(p){f[v]=r[v]}}}},e01a:function(e,n,i){"use strict";var t=i("23e7"),a=i("83ab"),r=i("da84"),o=i("5135"),s=i("861d"),d=i("9bf2").f,c=i("e893"),l=r.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var u={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof m?new l(e):void 0===e?l():l(e);return""===e&&(u[n]=!0),n};c(m,l);var f=m.prototype=l.prototype;f.constructor=m;var v=f.toString,p="Symbol(test)"==String(l("test")),k=/^Symbol\((.*)\)[^)]+$/;d(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,n=v.call(e);if(o(u,e))return"";var i=p?n.slice(7,-1):n.replace(k,"$1");return""===i?void 0:i}}),t({global:!0,forced:!0},{Symbol:m})}},e152:function(e,n,i){},ee27:function(e,n,i){"use strict";i.r(n);var t=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[e.show_update?i("asset-create",{on:{cancel:e.cancelUpdate,ok:e.ok}}):i("assets",{on:{update:e.update}})],1)},a=[],r=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"relative"},[i("header",{staticClass:"padding-lr-sm padding-tb-xs flex align-center justify-between solid-bottom line-grey"},[i("bg-tag",{attrs:{active:!0}},[e._v("Asset")]),i("a-button",{attrs:{type:"primary"},on:{click:e.add}},[i("a-icon",{attrs:{type:"plus"}}),e._v("新增 ")],1)],1),i("div",{staticClass:"flex align-center padding-lr-sm solid-bottom line-grey",staticStyle:{height:"36px"}},[i("span",{staticClass:"margin-right-sm"},[e._v(e._s(e.select_num)+" 选中")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.select_num>0,expression:"select_num > 0"}],staticClass:"flex"},[i("bg-tag",{staticClass:"text-red"},[i("a-icon",{staticClass:"margin-right-xxs",attrs:{type:"delete"}}),e._v(" 删除 ")],1),i("bg-tag",{staticClass:"text-green"},[i("a-icon",{staticClass:"margin-right-xxs",attrs:{type:"up-square"}}),e._v(" 发布 ")],1),i("bg-tag",{staticClass:"text-yellow"},[i("a-icon",{staticClass:"margin-right-xxs",attrs:{type:"close-square"}}),e._v(" 不发布 ")],1)],1)]),i("a-table",{staticClass:"content-table",attrs:{size:"middle",rowKey:"id",rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,pagination:!1,scroll:{x:1200,y:"calc(100vh - 210px)",scrollToFirstRowOnChange:!0}}}),i("div",{staticClass:"flex justify-center margin-top-sm"},[i("a-pagination",{attrs:{showSizeChanger:"",showQuickJumper:"",total:e.total,showTotal:function(e){return"共 "+e+" 条"},pageSize:e.search.paginator.limit,defaultCurrent:1,pageSizeOptions:["10","30","50","100"]},on:{showSizeChange:e.showSizeChange}})],1),0==e.data.length?i("a-empty",{staticClass:"empty-content"}):e._e()],1)},o=[],s=(i("ac1f"),i("841c"),i("2af9")),d=i("34d6"),c=i("ca00"),l=i("4360"),u=i("a3be"),m={name:"Contents",props:{},components:{BgTag:s["c"]},data:function(){var e=this,n=[{title:"文件名",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"链接",dataIndex:"url"},{title:"大小",dataIndex:"file_size"}],i={onChange:function(n,i){console.log("selectedRowKeys: ".concat(n),"selectedRows: ",i),e.select_num=i.length},onSelect:function(e,n,i){console.log(e,n,i)},onSelectAll:function(e,n,i){console.log(e,n,i)}};return{rowSelection:i,columns:n,data:[],select_num:0,show_create:!1,total:30,search:{paginator:{page:1,limit:30}}}},computed:{},mounted:function(){this.getList()},methods:{add:function(){this.$emit("update")},showSizeChange:function(e,n){this.search.paginator.limit=n},getList:function(){var e=this,n=this;n.$apollo.query({query:d["userAssets"],variables:n.search,fetchPolicy:"no-cache",context:{uri:u["a"].projectUri+l["a"].state.common.currentProject.id}}).then((function(e){n.data=e.data.userAssets.items,n.total=e.data.userAssets.cursor.total})).catch((function(n){e.$message.warning(Object(c["a"])(n.message))}))}}},f=m,v=(i("28e9"),i("d463"),i("2877")),p=Object(v["a"])(f,r,o,!1,null,"2a025353",null),k=p.exports,g=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("h1",{staticClass:"text-lg margin-bottom"},[e._v("上传附件")]),i("a-form",{attrs:{form:e.form}},[i("a-upload",{attrs:{fileList:e.fileList,multiple:!1,remove:e.handleRemove,beforeUpload:e.beforeUpload}},[i("a-button",[i("a-icon",{attrs:{type:"upload"}}),e._v(" 选择要上传的文件 ")],1)],1),i("div",{staticClass:"flex justify-center margin-top"},[i("a-button",{staticClass:"margin-right",attrs:{type:"link",loading:e.submit_loading},on:{click:e.cancel}},[e._v("取消")]),i("a-button",{attrs:{type:"primary",loading:e.submit_loading},on:{click:e.handleUpload}},[e._v("创建")])],1)],1)],1)},h=[];i("a4d3"),i("e01a"),i("99af"),i("4160"),i("c975"),i("fb6a"),i("a434"),i("b0c0"),i("159b");function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);i<n;i++)t[i]=e[i];return t}function S(e){if(Array.isArray(e))return b(e)}i("d28b"),i("a630"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function y(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}i("25f0");function N(e,n){if(e){if("string"===typeof e)return b(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(e,n):void 0}}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e){return S(e)||y(e)||N(e)||w()}var j=i("4087"),C=i("b775");function A(e){return Object(C["b"])({url:"api/upload-image",method:"post",data:e})}var _={components:{},data:function(){return{fileList:[],form:this.$form.createForm(this),submit_loading:!1}},created:function(){},methods:{cancel:function(){this.$emit("cancel")},goSchema:function(){this.$router.push({name:"Schema"})},handleRemove:function(e){var n=this.fileList.indexOf(e),i=this.fileList.slice();i.splice(n,1),this.fileList=i},beforeUpload:function(e){return this.fileList=[].concat(x(this.fileList),[e]),!1},handleUpload:function(){var e=this,n=this.fileList,i=new FormData;n.forEach((function(e){i.append("file",e)})),this.submit_loading=!0,A(i).then((function(n){e.submit_loading=!1,200==n.code?(e.fileList=[],e.$message.success("上传成功"),e.$emit("ok")):e.$message.error(n.message)}))},handleSubmit:function(e){var n=this;e.preventDefault();var i=this;this.form.validateFields((function(e,t){e||i.$apollo.mutate({mutation:j["userCreateProject"],variables:{id:"",name:t.name,description:t.description},fetchPolicy:"no-cache"}).then((function(e){l["a"].commit("SetCurrentProject",e.data.userCreateProject),n.goSchema()})).catch((function(e){n.$message.warning(Object(c["a"])(e.message))}))}))}}},F=_,$=(i("7702"),Object(v["a"])(F,g,h,!1,null,"0d912938",null)),O=$.exports,D={components:{Assets:k,AssetCreate:O},data:function(){return{content:{id:1},show_update:!1}},computed:{},mounted:function(){},methods:{cancelUpdate:function(){this.show_update=!1},ok:function(){this.show_update=!1},update:function(e){this.content=e||{},this.show_update=!0}}},P=D,V=Object(v["a"])(P,t,a,!1,null,"24aa6003",null);n["default"]=V.exports},fb6a:function(e,n,i){"use strict";var t=i("23e7"),a=i("861d"),r=i("e8b5"),o=i("23cb"),s=i("50c4"),d=i("fc6a"),c=i("8418"),l=i("b622"),u=i("1dde"),m=i("ae40"),f=u("slice"),v=m("slice",{ACCESSORS:!0,0:0,1:2}),p=l("species"),k=[].slice,g=Math.max;t({target:"Array",proto:!0,forced:!f||!v},{slice:function(e,n){var i,t,l,u=d(this),m=s(u.length),f=o(e,m),v=o(void 0===n?m:n,m);if(r(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?a(i)&&(i=i[p],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return k.call(u,f,v);for(t=new(void 0===i?Array:i)(g(v-f,0)),l=0;f<v;f++,l++)f in u&&c(t,l,u[f]);return t.length=l,t}})}}]);
//# sourceMappingURL=chunk-fb7389e4.acb3a815.js.map