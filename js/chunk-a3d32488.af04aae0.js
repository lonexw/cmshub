(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3d32488"],{"0003":function(e,n,i){},"1a70":function(e,n,i){"use strict";var t=i("0003"),a=i.n(t);a.a},4087:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userProjects"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userProjects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userUpdateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:495}};i.loc.source={body:"query userProjects {\n  userProjects {\n    id,\n    name,\n    description\n  }\n}\n\nmutation userCreateProject($id: ID, $name: String!, $description: String) {\n  userCreateProject(data: {\n    id: $id,\n    name: $name,\n    description: $description\n  }) {\n    description,\n    name,\n    id\n  }\n}\n\nmutation userUpdateProject($id: ID, $name: String!, $description: String) {\n  userUpdateProject (data: {\n    id: $id,\n    name: $name,\n    description: $description\n  }) {\n    id, name, description\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var a={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function o(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=a[n]||new Set,o=new Set,s=new Set;t.forEach((function(e){s.add(e)}));while(s.size>0){var c=s;s=new Set,c.forEach((function(e){if(!o.has(e)){o.add(e);var n=a[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return o.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),a[e.name.value]=n}}))})(),e.exports=i,e.exports["userProjects"]=o(i,"userProjects"),e.exports["userCreateProject"]=o(i,"userCreateProject"),e.exports["userUpdateProject"]=o(i,"userUpdateProject")},4233:function(e,n,i){},"6bc2":function(e,n,i){},"7b3c":function(e,n,i){"use strict";i.r(n);var t=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("header",{staticClass:"project-header text-center text-xxxxl padding-xxs text-black"},[t("logo")],1),t("div",{staticClass:"project-body"},[e.is_create?t("project-create",{on:{cancel:e.cancelCreate}}):t("project-list",{on:{create:e.create}})],1),t("footer",{staticClass:"solid-top padding-xxs project-footer"},[t("a-popover",{attrs:{placement:"topLeft"}},[t("template",{slot:"content"},[t("a-button",{attrs:{type:"link"},on:{click:e.logout}},[t("a-icon",{attrs:{type:"logout"}}),e._v("退出")],1)],1),t("img",{staticClass:"margin-left round pointer",attrs:{src:i("9b19"),width:"40px"}})],2)],1)])},a=[],r=(i("d3b7"),i("5530")),o=i("1101"),s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"logo"},[t("router-link",{attrs:{to:{name:"Index"}}},[t("img",{attrs:{src:i("9b19")}}),e.showTitle?t("h1",[e._v(e._s(e.title))]):e._e()])],1)},c=[],d={name:"Logo",components:{},props:{title:{type:String,default:"CMS Hub",required:!1},showTitle:{type:Boolean,default:!0,required:!1}}},l=d,u=i("2877"),m=Object(u["a"])(l,s,c,!1,null,null,null),v=m.exports,f=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("h1",{staticClass:"text-lg margin-bottom"},[e._v("我的项目")]),i("div",{staticClass:"flex flex-wrap"},[e._l(e.list,(function(n,t){return[i("div",{key:t,staticClass:"project",on:{click:function(i){return e.goSchema(n)}}},[i("div",{staticClass:"icon"},[e._v(e._s(n.name))]),i("div",{staticClass:"margin-top text-bold text-black"},[e._v(e._s(n.name))])])]})),i("div",{staticClass:"project",on:{click:e.create}},[i("a-icon",{staticClass:"add-icon",attrs:{type:"plus-circle"}}),i("div",{staticClass:"margin-top text-bold text-black"},[e._v("创建新项目")])],1)],2)])},p=[],k=i("4087"),b=i("ca00"),g=i("4360"),h={components:{},data:function(){return{list:[]}},created:function(){this.getList()},methods:{create:function(){this.$emit("create")},goSchema:function(e){var n=this;g["a"].dispatch("SetCurrentProject",e).then((function(){n.$router.push({name:"Content"})}))},getList:function(){var e=this,n=this;n.$apollo.query({query:k["userProjects"],variables:{},fetchPolicy:"no-cache"}).then((function(e){n.list=e.data.userProjects})).catch((function(n){e.$message.warning(Object(b["a"])(n.message))}))}}},N=h,S=(i("a6df"),Object(u["a"])(N,f,p,!1,null,"05919fb9",null)),j=S.exports,y=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("h1",{staticClass:"text-lg margin-bottom"},[e._v("创建新项目")]),i("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[i("a-row",{attrs:{gutter:32}},[i("a-col",{attrs:{span:12}},[i("a-form-item",{attrs:{label:"项目名称"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入项目名称"}]}],expression:"[\n              'name',\n              {\n                rules: [{ required: true, message: '请输入项目名称' }]\n              }\n            ]"}],attrs:{size:"large"}})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-item",{attrs:{label:"项目描述"}},[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!1,message:"请输入项目名称"}]}],expression:"[\n              'description',\n              {\n                rules: [{ required: false, message: '请输入项目名称' }]\n              }\n            ]"}],attrs:{size:"large"}})],1)],1)],1),i("div",{staticClass:"flex justify-center margin-top"},[i("a-button",{staticClass:"margin-right",attrs:{type:"link",loading:e.submit_loading},on:{click:e.cancel}},[e._v("取消")]),i("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.submit_loading}},[e._v("创建")])],1)],1)],1)},x=[],C=(i("a4d3"),i("e01a"),i("b0c0"),{components:{},data:function(){return{form:this.$form.createForm(this),submit_loading:!1}},created:function(){},methods:{cancel:function(){this.$emit("cancel")},goSchema:function(){this.$router.push({name:"Schema"})},handleSubmit:function(e){var n=this;e.preventDefault();var i=this;this.form.validateFields((function(e,t){e||i.$apollo.mutate({mutation:k["userCreateProject"],variables:{id:"",name:t.name,description:t.description},fetchPolicy:"no-cache"}).then((function(e){g["a"].dispatch("SetCurrentProject",e.data.userCreateProject).then((function(){n.$router.push({name:"Schema"})})),n.goSchema()})).catch((function(e){n.$message.warning(Object(b["a"])(e.message))}))}))}}}),$=C,P=(i("ba1a"),Object(u["a"])($,y,x,!1,null,"290f09ce",null)),_=P.exports,w=i("2f62"),O=i("9408"),D={components:{Logo:v,ProjectList:j,ProjectCreate:_},data:function(){return{domTitle:o["a"],is_create:!1}},created:function(){},methods:Object(r["a"])({},Object(w["b"])(["Logout"]),{create:function(){this.is_create=!0},cancelCreate:function(){this.is_create=!1},logout:function(){var e=this;this.$confirm({title:"确认退出吗？",confirmLoading:!0,onOk:function(){e.$apollo.query({query:O["userLogout"],variables:{}}).finally((function(){e.Logout({}).finally((function(){setTimeout((function(){window.location.reload()}),16)}))}))}})}})},F=D,V=(i("1a70"),i("df95"),Object(u["a"])(F,t,a,!1,null,"2b4404d2",null));n["default"]=V.exports},a6df:function(e,n,i){"use strict";var t=i("ea5f"),a=i.n(t);a.a},ba1a:function(e,n,i){"use strict";var t=i("6bc2"),a=i.n(t);a.a},ca00:function(e,n,i){"use strict";i.d(n,"a",(function(){return t}));i("ac1f"),i("5319");function t(e){return e.replace(/GraphQL error:/,"")}},df95:function(e,n,i){"use strict";var t=i("4233"),a=i.n(t);a.a},e01a:function(e,n,i){"use strict";var t=i("23e7"),a=i("83ab"),r=i("da84"),o=i("5135"),s=i("861d"),c=i("9bf2").f,d=i("e893"),l=r.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var u={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof m?new l(e):void 0===e?l():l(e);return""===e&&(u[n]=!0),n};d(m,l);var v=m.prototype=l.prototype;v.constructor=m;var f=v.toString,p="Symbol(test)"==String(l("test")),k=/^Symbol\((.*)\)[^)]+$/;c(v,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,n=f.call(e);if(o(u,e))return"";var i=p?n.slice(7,-1):n.replace(k,"$1");return""===i?void 0:i}}),t({global:!0,forced:!0},{Symbol:m})}},ea5f:function(e,n,i){}}]);
//# sourceMappingURL=chunk-a3d32488.af04aae0.js.map