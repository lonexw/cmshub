(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15865ee1"],{"0003":function(e,i,n){},"1a70":function(e,i,n){"use strict";var t=n("0003"),a=n.n(t);a.a},3483:function(e,i,n){},"3c48":function(e,i,n){"use strict";var t=n("5f6d"),a=n.n(t);a.a},"3d2c":function(e,i,n){"use strict";var t=n("3483"),a=n.n(t);a.a},4087:function(e,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userProjects"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userProjects"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userUpdateProject"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdateProject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"ObjectField",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:495}};n.loc.source={body:"query userProjects {\n  userProjects {\n    id,\n    name,\n    description\n  }\n}\n\nmutation userCreateProject($id: ID, $name: String!, $description: String) {\n  userCreateProject(data: {\n    id: $id,\n    name: $name,\n    description: $description\n  }) {\n    description,\n    name,\n    id\n  }\n}\n\nmutation userUpdateProject($id: ID, $name: String!, $description: String) {\n  userUpdateProject (data: {\n    id: $id,\n    name: $name,\n    description: $description\n  }) {\n    id, name, description\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,i){if("FragmentSpread"===e.kind)i.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&i.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,i)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,i)})),e.definitions&&e.definitions.forEach((function(e){t(e,i)}))}var a={};function r(e,i){for(var n=0;n<e.definitions.length;n++){var t=e.definitions[n];if(t.name&&t.name.value==i)return t}}function o(e,i){var n={kind:e.kind,definitions:[r(e,i)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var t=a[i]||new Set,o=new Set,s=new Set;t.forEach((function(e){s.add(e)}));while(s.size>0){var c=s;s=new Set,c.forEach((function(e){if(!o.has(e)){o.add(e);var i=a[e]||new Set;i.forEach((function(e){s.add(e)}))}}))}return o.forEach((function(i){var t=r(e,i);t&&n.definitions.push(t)})),n}(function(){n.definitions.forEach((function(e){if(e.name){var i=new Set;t(e,i),a[e.name.value]=i}}))})(),e.exports=n,e.exports["userProjects"]=o(n,"userProjects"),e.exports["userCreateProject"]=o(n,"userCreateProject"),e.exports["userUpdateProject"]=o(n,"userUpdateProject")},4233:function(e,i,n){},"5f6d":function(e,i,n){},"7b3c":function(e,i,n){"use strict";n.r(i);var t=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[t("header",{staticClass:"project-header text-center text-xxxxl padding-xxs text-black"},[t("logo")],1),t("div",{staticClass:"project-body"},[e.is_create?t("project-create",{on:{cancel:e.cancelCreate}}):t("project-list",{on:{create:e.create}})],1),t("footer",{staticClass:"solid-top padding-xxs project-footer"},[t("a-popover",{attrs:{placement:"topLeft"}},[t("template",{slot:"content"},[t("a-button",{attrs:{type:"link"},on:{click:e.logout}},[t("a-icon",{attrs:{type:"logout"}}),e._v("退出")],1)],1),t("img",{staticClass:"margin-left round pointer",attrs:{src:n("9b19"),width:"40px"}})],2)],1)])},a=[],r=(n("d3b7"),n("5530")),o=n("1101"),s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"logo"},[t("router-link",{attrs:{to:{name:"Index"}}},[t("img",{attrs:{src:n("9b19")}}),e.showTitle?t("h1",[e._v(e._s(e.title))]):e._e()])],1)},c=[],d={name:"Logo",components:{},props:{title:{type:String,default:"CMS Hub",required:!1},showTitle:{type:Boolean,default:!0,required:!1}}},l=d,u=n("2877"),m=Object(u["a"])(l,s,c,!1,null,null,null),v=m.exports,f=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",[n("h1",{staticClass:"text-lg margin-bottom"},[e._v("我的项目")]),n("div",{staticClass:"flex flex-wrap"},[e._l(e.list,(function(i,t){return[n("div",{key:t,staticClass:"project",on:{click:function(n){return e.goSchema(i)}}},[n("div",{staticClass:"icon"},[e._v(e._s(i.name))]),n("div",{staticClass:"margin-top text-bold text-black"},[e._v(e._s(i.name))])])]})),n("div",{staticClass:"project",on:{click:e.create}},[n("a-icon",{staticClass:"add-icon",attrs:{type:"plus-circle"}}),n("div",{staticClass:"margin-top text-bold text-black"},[e._v("创建新项目")])],1)],2)])},p=[],k=n("4087"),b=n("ca00"),g=n("4360"),h={components:{},data:function(){return{list:[]}},created:function(){this.getList()},methods:{create:function(){this.$emit("create")},goSchema:function(e){var i=this;g["a"].dispatch("SetCurrentProject",e).then((function(){i.$router.push({name:"Schema"})}))},getList:function(){var e=this,i=this;i.$apollo.query({query:k["userProjects"],variables:{},fetchPolicy:"no-cache"}).then((function(e){i.list=e.data.userProjects})).catch((function(i){e.$message.warning(Object(b["a"])(i.message))}))}}},N=h,S=(n("3d2c"),Object(u["a"])(N,f,p,!1,null,"56300794",null)),j=S.exports,y=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",[n("h1",{staticClass:"text-lg margin-bottom"},[e._v("创建新项目")]),n("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[n("a-row",{attrs:{gutter:32}},[n("a-col",{attrs:{span:12}},[n("a-form-item",{attrs:{label:"项目名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入项目名称"}]}],expression:"[\n              'name',\n              {\n                rules: [{ required: true, message: '请输入项目名称' }]\n              }\n            ]"}],attrs:{size:"large"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-item",{attrs:{label:"项目描述"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!1,message:"请输入项目名称"}]}],expression:"[\n              'description',\n              {\n                rules: [{ required: false, message: '请输入项目名称' }]\n              }\n            ]"}],attrs:{size:"large"}})],1)],1)],1),n("div",{staticClass:"flex justify-center margin-top"},[n("a-button",{staticClass:"margin-right",attrs:{type:"link",loading:e.submit_loading},on:{click:e.cancel}},[e._v("取消")]),n("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.submit_loading}},[e._v("创建")])],1)],1)],1)},x=[],C=(n("a4d3"),n("e01a"),n("b0c0"),{components:{},data:function(){return{form:this.$form.createForm(this),submit_loading:!1}},created:function(){},methods:{cancel:function(){this.$emit("cancel")},goSchema:function(){this.$router.push({name:"Schema"})},handleSubmit:function(e){var i=this;e.preventDefault();var n=this;this.form.validateFields((function(e,t){e||n.$apollo.mutate({mutation:k["userCreateProject"],variables:{id:"",name:t.name,description:t.description},fetchPolicy:"no-cache"}).then((function(e){g["a"].commit("SetCurrentProject",e.data.userCreateProject),i.goSchema()})).catch((function(e){i.$message.warning(Object(b["a"])(e.message))}))}))}}}),P=C,$=(n("3c48"),Object(u["a"])(P,y,x,!1,null,"87189578",null)),_=$.exports,w=n("2f62"),O=n("9408"),D={components:{Logo:v,ProjectList:j,ProjectCreate:_},data:function(){return{domTitle:o["a"],is_create:!1}},created:function(){},methods:Object(r["a"])({},Object(w["b"])(["Logout"]),{create:function(){this.is_create=!0},cancelCreate:function(){this.is_create=!1},logout:function(){var e=this;this.$confirm({title:"确认退出吗？",confirmLoading:!0,onOk:function(){e.$apollo.query({query:O["userLogout"],variables:{}}).finally((function(){e.Logout({}).finally((function(){setTimeout((function(){window.location.reload()}),16)}))}))}})}})},F=D,V=(n("1a70"),n("df95"),Object(u["a"])(F,t,a,!1,null,"2b4404d2",null));i["default"]=V.exports},ca00:function(e,i,n){"use strict";n.d(i,"a",(function(){return t}));n("ac1f"),n("5319");function t(e){return e.replace(/GraphQL error:/,"")}},df95:function(e,i,n){"use strict";var t=n("4233"),a=n.n(t);a.a},e01a:function(e,i,n){"use strict";var t=n("23e7"),a=n("83ab"),r=n("da84"),o=n("5135"),s=n("861d"),c=n("9bf2").f,d=n("e893"),l=r.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var u={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),i=this instanceof m?new l(e):void 0===e?l():l(e);return""===e&&(u[i]=!0),i};d(m,l);var v=m.prototype=l.prototype;v.constructor=m;var f=v.toString,p="Symbol(test)"==String(l("test")),k=/^Symbol\((.*)\)[^)]+$/;c(v,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,i=f.call(e);if(o(u,e))return"";var n=p?i.slice(7,-1):i.replace(k,"$1");return""===n?void 0:n}}),t({global:!0,forced:!0},{Symbol:m})}}}]);
//# sourceMappingURL=chunk-15865ee1.c5f9fcfb.js.map