(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-719f4420"],{"1cf9":function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userAllLanguages"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userAllLanguages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_default"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userLanguages"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userLanguages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"language"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_default"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateLanguage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"LanguageInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateLanguage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"project_id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userDeleteLanguage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userDeleteLanguage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userLanguageCode"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userLanguageCode"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}],loc:{start:0,end:538}};a.loc.source={body:"query userAllLanguages {\n  userAllLanguages {\n    items {\n      id,\n      name,\n      code,\n      is_default\n    }\n  }\n}\n\nquery userLanguages {\n  userLanguages {\n    items {\n      id,\n      code,\n      language{\n      code,\n      name,\n      is_default\n      }\n    }\n  }\n}\n\nmutation userCreateLanguage($data: LanguageInput!) {\n  userCreateLanguage(data: $data) {\n    id,\n    project_id\n  }\n}\n\nmutation userDeleteLanguage($id: Int!) {\n  userDeleteLanguage (id: $id)\n}\n\nquery userLanguageCode ($id: Int!) {\n  userLanguageCode (id: $id)\n}\n\n\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}function o(e,t){var a={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var n=i[t]||new Set,o=new Set,r=new Set;n.forEach((function(e){r.add(e)}));while(r.size>0){var l=r;r=new Set,l.forEach((function(e){if(!o.has(e)){o.add(e);var t=i[e]||new Set;t.forEach((function(e){r.add(e)}))}}))}return o.forEach((function(t){var n=s(e,t);n&&a.definitions.push(n)})),a}(function(){a.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}}))})(),e.exports=a,e.exports["userAllLanguages"]=o(a,"userAllLanguages"),e.exports["userLanguages"]=o(a,"userLanguages"),e.exports["userCreateLanguage"]=o(a,"userCreateLanguage"),e.exports["userDeleteLanguage"]=o(a,"userDeleteLanguage"),e.exports["userLanguageCode"]=o(a,"userLanguageCode")},"21b3":function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userCategories"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCategories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userCategoryList"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCategories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"customs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"zh_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plural_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"category_id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userCategory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCategory"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateCategory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CategoryInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateCategory"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userUpdateCategory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CategoryInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdateCategory"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userUpdateSequenceCategory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"CategorySequenceInput"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdateSequenceCategory"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[]}]}}],loc:{start:0,end:730}};a.loc.source={body:"query userCategories {\n  userCategories {\n    items {\n      id,\n      title\n    }\n  }\n}\n\nquery userCategoryList {\n  userCategories {\n    items {\n      id\n      title\n      customs {\n        id\n        name\n        zh_name\n        plural_name\n        description\n        category_id\n      }\n    }\n  }\n}\n\nquery userCategory ($id: Int!) {\n  userCategory (id: $id) {\n    id\n    title\n  }\n}\n\nmutation userCreateCategory($data: CategoryInput!) {\n  userCreateCategory(data: $data) {\n    id,\n    title\n  }\n}\n\nmutation userUpdateCategory($data: CategoryInput!) {\n  userUpdateCategory(data: $data) {\n    id,\n    title\n  }\n}\n\nmutation userUpdateSequenceCategory($data: [CategorySequenceInput]!) {\n  userUpdateSequenceCategory(data: $data)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}function o(e,t){var a={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var n=i[t]||new Set,o=new Set,r=new Set;n.forEach((function(e){r.add(e)}));while(r.size>0){var l=r;r=new Set,l.forEach((function(e){if(!o.has(e)){o.add(e);var t=i[e]||new Set;t.forEach((function(e){r.add(e)}))}}))}return o.forEach((function(t){var n=s(e,t);n&&a.definitions.push(n)})),a}(function(){a.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}}))})(),e.exports=a,e.exports["userCategories"]=o(a,"userCategories"),e.exports["userCategoryList"]=o(a,"userCategoryList"),e.exports["userCategory"]=o(a,"userCategory"),e.exports["userCreateCategory"]=o(a,"userCreateCategory"),e.exports["userUpdateCategory"]=o(a,"userUpdateCategory"),e.exports["userUpdateSequenceCategory"]=o(a,"userUpdateSequenceCategory")},"34d6":function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userAssets"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paginator"}},type:{kind:"NamedType",name:{kind:"Name",value:"PaginatorInput"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"more"}},type:{kind:"NamedType",name:{kind:"Name",value:"AssetPaginatorInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userAssets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paginator"},value:{kind:"Variable",name:{kind:"Name",value:"paginator"}}},{kind:"Argument",name:{kind:"Name",value:"more"},value:{kind:"Variable",name:{kind:"Name",value:"more"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated_at"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateBatchAsset"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AssetInput"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateBatchAsset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userDeleteBatchAsset"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userDeleteBatchAsset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}}],directives:[]}]}}],loc:{start:0,end:460}};a.loc.source={body:"query userAssets($paginator: PaginatorInput\n  $more: AssetPaginatorInput) {\n  userAssets(paginator: $paginator\n    more: $more) {\n    items {\n      id,\n      name,\n      url,\n      file_size,\n      type,\n      created_at,\n      updated_at\n    },\n    cursor {\n      total\n    }\n  }\n}\n\nmutation userCreateBatchAsset($data: [AssetInput!]!) {\n  userCreateBatchAsset(data: $data)\n}\n\nmutation userDeleteBatchAsset($ids: [Int]!) {\n  userDeleteBatchAsset(ids: $ids)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function s(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}function o(e,t){var a={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var n=i[t]||new Set,o=new Set,r=new Set;n.forEach((function(e){r.add(e)}));while(r.size>0){var l=r;r=new Set,l.forEach((function(e){if(!o.has(e)){o.add(e);var t=i[e]||new Set;t.forEach((function(e){r.add(e)}))}}))}return o.forEach((function(t){var n=s(e,t);n&&a.definitions.push(n)})),a}(function(){a.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}}))})(),e.exports=a,e.exports["userAssets"]=o(a,"userAssets"),e.exports["userCreateBatchAsset"]=o(a,"userCreateBatchAsset"),e.exports["userDeleteBatchAsset"]=o(a,"userDeleteBatchAsset")},"38ae":function(e,t,a){},"392a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-page",{attrs:{title:"内容管理"},scopedSlots:e._u([{key:"sider",fn:function(){return[a("div",{staticClass:"models"},e._l(e.categories,(function(t){return a("a-menu",{key:t.id,attrs:{"default-open-keys":e.openKeys,mode:"inline"}},[a("a-sub-menu",{key:t.id},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),e._l(t.customs,(function(t){return a("a-menu-item",{key:t.id,on:{click:e.menuClick}},[e._v(" "+e._s(t.zh_name)+" ")])}))],2)],1)})),1)]},proxy:!0},{key:"content",fn:function(){return[e.show_list?a("contents",{attrs:{custom:e.selectCustom},on:{update:e.update}}):e._e(),e.show_update?a("update-content",{attrs:{"data-form":e.content,custom:e.selectCustom,model:"Admin"},on:{cancel:e.cancelUpdate}}):e._e()]},proxy:!0}])})},i=[],s=(a("4160"),a("159b"),a("2af9")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative"},[a("header",{staticClass:"padding-lr-sm padding-tb-xs flex align-center justify-between solid-bottom line-grey"},[a("bg-tag",{attrs:{active:!0}},[e._v(e._s(e.custom?e.custom.zh_name+"列表":""))]),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[a("a-icon",{attrs:{type:"plus"}}),e._v("新增 ")],1)],1),a("div",{staticClass:"flex align-center padding-lr-sm solid-bottom line-grey",staticStyle:{height:"36px"}},[a("span",{staticClass:"margin-right-sm"},[e._v(e._s(e.select_num)+" 选中")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.select_num>0,expression:"select_num > 0"}],staticClass:"flex",on:{click:e.batchDelete}},[a("bg-tag",{staticClass:"text-red"},[a("a-icon",{staticClass:"margin-right-xxs",attrs:{type:"delete"}}),e._v(" 删除 ")],1)],1)]),a("div",{staticClass:"flex justify-center margin-top-sm"},[a("a-pagination",{attrs:{showSizeChanger:"",showQuickJumper:"",total:e.total,showTotal:function(e){return"共 "+e+" 条"},pageSize:e.search.paginator.limit,defaultCurrent:1,pageSizeOptions:["10","30","50","100"]},on:{change:e.change,showSizeChange:e.showSizeChange}})],1),a("a-table",{attrs:{size:"middle",rowKey:"id",rowSelection:e.rowSelection,columns:e.columns,dataSource:e.data,loading:e.loading,pagination:!1,locale:{emptyText:"暂无数据"},scroll:e.columns.length>5&&e.data.length>8?{x:2e3,y:1200}:{x:100,y:300}}}),a("a-modal",{attrs:{maskClosable:!1,width:e.referenceModal.width,title:e.referenceModal.title,visible:e.referenceModal.visible,footer:null},on:{cancel:e.closeReferenceDialog}},[e.referenceModal.visible?a("ContentShow",{attrs:{"custom-id":e.referenceModal.field.reference_custom_id,ids:e.referenceModal.ids}}):e._e(),a("div",{staticStyle:{"text-align":"right"}},[a("a-button",{staticClass:"margin-right-sm",on:{click:e.closeReferenceDialog}},[e._v("关闭")])],1)],1)],1)},r=[],l=(a("c975"),a("b0c0"),a("ac1f"),a("841c"),a("8785")),c=a("438c"),d=a("ca00"),u=a("4360"),m=a("a3be"),f=a("9530"),h=a.n(f),g=a("4c87");function v(){var e=Object(l["a"])(["query "," ($paginator: PaginatorInput, $more: ","PaginatorInput) { \n            "," (paginator: $paginator, more: $more) { \n            items { \n              ","\n            },\n            cursor { total } \n            }\n          }"]);return v=function(){return e},e}function p(){var e=Object(l["a"])(["mutation "," ($id: Int!) { \n                "," (id: $id)\n              }"]);return p=function(){return e},e}function k(){var e=Object(l["a"])(["mutation "," ($ids: [Int]!) { \n                "," (ids: $ids)\n              }"]);return k=function(){return e},e}var y={name:"Contents",props:{custom:{}},components:{BgTag:s["d"],PreviewImage:g["a"],ContentShow:s["e"]},data:function(){var e=this,t={onChange:function(t,a){e.select_num=a.length;var n=[];a.forEach((function(e){n.push(e.id)})),e.ids=n},onSelect:function(e,t,a){console.log(e,t,a)},onSelectAll:function(e,t,a){console.log(e,t,a)}};return{rowSelection:t,columns:[],data:[],fields:[],fieldNames:[],select_num:0,ids:[],show_create:!1,total:0,search:{paginator:{page:1,limit:30}},referenceModal:{title:"关联信息",visible:!1,width:"80%",item:{},field:{},data:[],fields:[],fieldNames:[],ids:[]},loading:!1}},created:function(){},computed:{},mounted:function(){this.getFieldList()},methods:{add:function(e){this.$emit("update",e)},batchDelete:function(){var e=this,t="userDeleteBatch"+e.custom.name;this.$confirm({title:"确认删除选中数据吗？",confirmLoading:!0,onOk:function(){e.$apollo.mutate({mutation:h()(k(),t,t),variables:{ids:e.ids},fetchPolicy:"no-cache",context:{uri:m["a"].projectUri+u["a"].state.common.currentProject.id}}).then((function(){e.getContentList(),e.select_num=0,e.ids=[]})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))}})},deleteItem:function(e){var t=this,a="userDelete"+t.custom.name;this.$confirm({title:"确认删除吗？",confirmLoading:!0,onOk:function(){t.$apollo.mutate({mutation:h()(p(),a,a),variables:{id:e.id},fetchPolicy:"no-cache",context:{uri:m["a"].projectUri+u["a"].state.common.currentProject.id}}).then((function(){t.getContentList()})).catch((function(e){t.$message.warning(Object(d["a"])(e.message))}))}})},showSizeChange:function(e,t){this.search.paginator.limit=t,this.getContentList()},change:function(e,t){this.search.paginator.page=e,this.search.paginator.limit=t,this.getContentList()},getFieldList:function(){var e=this,t=this.$createElement;this.data=[];var a=this;a.$apollo.query({query:c["userFields"],variables:{more:{custom_id:a.custom.id},paginator:{limit:100}},fetchPolicy:"no-cache"}).then((function(n){var i=n.data.userFields.items,s=[],o=[],r=[];i.forEach((function(e){"__typename"!=e.name&&(s.push(e),"ASSET"==e.type?r.push({title:e.zh_name,dataIndex:e.name,customRender:function(n,i){if(e.is_multiple){var s=[];return i[e.name+"Asset"].forEach((function(e){if(e){var t=a.$createElement("div",{domProps:{innerHTML:"<img src="+e.url+' height="30px" />'}});s.push(t)}})),s}var o=i[e.name+"Asset"];if(o){var r=i[e.name+"Asset"].url;return i[e.name+"Asset"].type.indexOf("image")>-1?t("preview-image",{attrs:{src:r,height:"30px"}}):r}return""}}):"REFERENCE"==e.type?r.push({title:e.zh_name,dataIndex:e.name,customRender:function(t,n){var i=a.$createElement("a",{domProps:{innerHTML:t},on:{click:function(){a.showReferenceDialog(n,e,t)}}});return i}}):"SINGLE_TEXT"==e.type&&r.push({title:e.zh_name,dataIndex:e.name,ellipsis:!0}),o.push(e.name))})),r.push({title:"添加时间",dataIndex:"created_at"}),o.push("created_at"),r.push({title:"操作",dataIndex:"action",fixed:"right",customRender:function(e,t){var n=[],i=a.$createElement("a",{domProps:{innerHTML:"编辑"},on:{click:function(){a.add(t)}}}),s=a.$createElement("span",{domProps:{innerHTML:" | ",width:"10px"}}),o=a.$createElement("a",{domProps:{innerHTML:"删除"},on:{click:function(){a.deleteItem(t)}}});return n.push(i),n.push(s),n.push(o),n}}),a.fields=s,a.columns=r,a.fieldNames=o,e.getContentList()})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))},getContentList:function(){var e=this;this.data=[];var t=this;t.loading=!0;var a="user"+t.custom.plural_name,n="id, created_at";t.fields.forEach((function(e){n+=",".concat(e.name),"ASSET"==e.type&&(n+=",".concat(e.name,"Asset {\n            created_at,\n            updated_at,\n            id,\n            name,\n            url,\n            type\n          }")),"REFERENCE"==e.type&&(n+=",".concat(e.name,"Reference {\n            created_at,\n            updated_at,\n            id,\n            title\n          }"))})),t.$apollo.query({query:h()(v(),a,t.custom.name,a,n),variables:t.search,fetchPolicy:"no-cache",context:{uri:m["a"].projectUri+u["a"].state.common.currentProject.id}}).then((function(e){t.data=e.data[a].items,t.total=e.data[a].cursor.total,t.loading=!1})).catch((function(a){e.$message.warning(Object(d["a"])(a.message)),t.loading=!1}))},showReferenceDialog:function(e,t,a){this.referenceModal.item=e,this.referenceModal.field=t,this.referenceModal.ids="string"===typeof a?[a]:a,this.referenceModal.visible=!0},closeReferenceDialog:function(){this.referenceModal.visible=!1}}},b=y,C=(a("581c"),a("4f4b"),a("2877")),S=Object(C["a"])(b,o,r,!1,null,"701be70a",null),_=S.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-layout",{staticClass:"layout"},[a("a-layout",{staticStyle:{"background-color":"white","margin-right":"240px"}},[a("a-layout-header",{staticClass:"header light",staticStyle:{height:"50px","line-height":"50px"}},[a("div",{staticClass:"flex align-center padding-lr-sm text-bold pointer text-black",on:{click:e.cancel}},[a("a-icon",{staticClass:"margin-right-xs",attrs:{type:"left"}}),e._v(" "+e._s(e.dataForm&&e.dataForm.id?"编辑":"创建")+" "+e._s(e.model)+" ")],1)]),a("a-layout-content",[a("div",{staticClass:"content-body padding-lr-sm"},[e.formShow?a("a-form-model",{ref:"createForm",attrs:{layout:"vertical",model:e.form,rules:e.rules}},[e._l(e.fields,(function(t,n){return["SINGLE_TEXT"==t.type?[1==t.is_mult_language&&1==e.showEnglish?[e._v(" "+e._s(t.zh_name)+" "),a("a-form-model-item",{key:e.form[t.name]+n,attrs:{label:"CN",prop:t.name}},[a("a-input",{attrs:{placeholder:"请输入"+t.zh_name},on:{change:e.formValueChange},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})],1),a("a-form-model-item",{key:"en"+e.form[t.name]+n,attrs:{label:e.checkCode,prop:t.name}},[a("a-input",{attrs:{placeholder:"请输入"+t.zh_name},on:{change:e.enFormValueChange},model:{value:e.enForm[t.name],callback:function(a){e.$set(e.enForm,t.name,a)},expression:"enForm[item.name]"}})],1)]:[a("a-form-model-item",{key:e.form[t.name]+n,attrs:{label:t.zh_name,prop:t.name}},[a("a-input",{attrs:{placeholder:"请输入"+t.zh_name},on:{change:e.formValueChange},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})],1)]]:"MULTI_TEXT"==t.type?[1==t.is_mult_language&&1==e.showEnglish?[e._v(" "+e._s(t.zh_name)+" "),a("a-form-model-item",{key:e.form[t.name]+n,attrs:{label:"CN",prop:t.name}},[a("a-input",{attrs:{type:"textarea",placeholder:"请输入"+t.zh_name},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})],1),a("a-form-model-item",{key:"en"+e.form[t.name]+n,attrs:{label:e.checkCode,prop:t.name}},[a("a-input",{attrs:{type:"textarea",placeholder:"请输入"+t.zh_name},model:{value:e.enForm[t.name],callback:function(a){e.$set(e.enForm,t.name,a)},expression:"enForm[item.name]"}})],1)]:[a("a-form-model-item",{key:e.form[t.name]+n,attrs:{label:t.zh_name,prop:t.name}},[a("a-input",{attrs:{type:"textarea",placeholder:"请输入"+t.zh_name},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})],1)]]:"RICH_TEXT"==t.type?[1==t.is_mult_language&&1==e.showEnglish?[e._v(" "+e._s(t.zh_name)+" "),a("a-form-model-item",{key:e.form[t.name]+n,attrs:{label:"CN",prop:t.name}},[a("WangEditor",{attrs:{name:t.name},on:{change:e.richValueChange},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})],1),a("a-form-model-item",{key:"en"+e.form[t.name]+n,attrs:{label:e.checkCode,prop:t.name}},[a("WangEditor",{attrs:{name:t.name},on:{change:e.richValueEnChange},model:{value:e.enForm[t.name],callback:function(a){e.$set(e.enForm,t.name,a)},expression:"enForm[item.name]"}})],1)]:[a("a-form-model-item",{key:e.form[t.name]+n,attrs:{label:t.zh_name,prop:t.name}},[a("WangEditor",{attrs:{name:t.name},on:{change:e.richValueChange},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}})],1)]]:"ASSET"==t.type?[a("a-form-model-item",{key:"asset"+n,attrs:{label:t.zh_name,prop:t.name}},[e._l(e.form[t.name+"Asset"],(function(n,i){return a("div",{key:i},[a("tag",{attrs:{closable:""},on:{close:function(a){return e.removeAsset(n,t.name)}}},[e._v(e._s(n.name))])],1)})),a("a-button",{on:{click:function(a){return e.showAssetDialog(t)}}},[e._v("选择")])],2)]:"REFERENCE"==t.type?[a("a-form-model-item",{key:"reference"+n,attrs:{label:t.zh_name,prop:t.name}},[t.is_required?a("a-input",{attrs:{type:"hidden"},model:{value:e.form[t.name],callback:function(a){e.$set(e.form,t.name,a)},expression:"form[item.name]"}}):e._e(),e._l(e.form[t.name+"Reference"],(function(n,i){return a("div",{key:i},[a("tag",{attrs:{closable:""},on:{close:function(a){return e.removeReference(n,t.name)}}},[e._v(e._s(n.title))])],1)})),a("a-button",{on:{click:function(a){return e.showReferenceDialog(t)}}},[e._v("选择")])],2)]:e._e()]}))],2):e._e()],1)])],1),a("a-layout-sider",{staticClass:"right-sider sider light padding-xs",style:{overflow:"auto",height:"100vh",position:"fixed",right:0,backgroundColor:"rgb(250, 250, 252)"}},[a("div",[a("a-button",{staticClass:"margin-right-xs",attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")]),a("a-button",{attrs:{type:"danger"},on:{click:e.submit}},[e._v("保存并发布")])],1),a("div",{staticClass:"text-df margin-tb"},[a("div",{staticClass:"margin-bottom-xs"},[e._v("信息")]),e.dataForm&&e.dataForm.id?a("div",{staticClass:"text-sm text-grey"},[a("div",{staticClass:"flex justify-between"},[a("span",[e._v("创建")]),a("span",[e._v("2020-04-09 18:17:54")])]),a("div",{staticClass:"flex justify-between"},[a("span",[e._v("更新")]),a("span",[e._v("2020-04-09 18:17:54")])])]):a("div",{staticClass:"text-sm text-grey margin-left-xs",staticStyle:{"font-style":"italic"}},[e._v(" 保存后显示 ")])]),a("div",{staticClass:"margin-tb"},[a("div",{staticClass:"text-df margin-bottom-xs"},[e._v("发布于")]),e.dataForm&&e.dataForm.id?a("div",{staticClass:"flex justify-between align-center padding-xs solid line-grey shadow radius",staticStyle:{"background-color":"white"}},[a("span",{staticClass:"text-sm"},[e._v("2020-04-09 18:25:11")]),a("a-tooltip",{attrs:{placement:"bottomRight"}},[a("template",{slot:"title"},[a("span",[e._v("取消发布")])]),a("a-icon",{staticClass:"pointer",staticStyle:{color:"red"},attrs:{type:"delete",theme:"filled"}})],2)],1):a("div",{staticClass:"text-sm text-grey margin-left-xs",staticStyle:{"font-style":"italic"}},[e._v(" 尚未发布 ")])]),a("div",{staticClass:"text-df margin-tb"},[e.showOtherLanguage?[a("div",{staticClass:"margin-bottom-xs"},[e._v("其它语言")]),a("div",{staticClass:"text-sm text-grey margin-left-xs",staticStyle:{"font-style":"italic"}},[a("a-checkbox-group",{attrs:{options:e.customList},on:{change:e.onChange},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}})],1)]:e._e()],2)]),a("a-modal",{attrs:{maskClosable:!1,width:e.assetModal.width,title:e.assetModal.title,visible:e.assetModal.visible,footer:null},on:{cancel:e.closeAssetDialog}},[e.assetModal.visible?a("asset-picker",{attrs:{"form-name":e.assetModal.item.name,"is-multiple":e.assetModal.item.is_multiple},on:{selectChange:e.assetSelectChange}}):e._e(),a("div",{staticStyle:{"text-align":"right"}},[a("a-button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:e.batchAdd}},[a("a-icon",{attrs:{type:"plus"}}),e._v("上传 ")],1),a("a-button",{staticClass:"margin-right-sm",on:{click:e.closeAssetDialog}},[e._v("关闭")])],1)],1),a("a-modal",{attrs:{maskClosable:!1,width:e.referenceModal.width,title:e.referenceModal.title,visible:e.referenceModal.visible,footer:null},on:{cancel:e.closeReferenceDialog}},[a("reference-picker",{attrs:{"form-name":e.referenceModal.item.name,"is-multiple":e.referenceModal.item.is_multiple,"custom-id":e.referenceModal.item.reference_custom_id},on:{selectChange:e.referenceSelectChange}}),a("div",{staticStyle:{"text-align":"right"}},[a("a-button",{staticClass:"margin-right-sm",on:{click:e.closeReferenceDialog}},[e._v("关闭")])],1)],1),a("a-modal",{attrs:{maskClosable:!1,width:e.uploadModal.width,title:e.uploadModal.title,visible:e.uploadModal.visible,footer:null},on:{cancel:e.closeUploadDialog}},[a("div",[a("a-layout",{staticStyle:{"background-color":"white","margin-right":"240px"}},[a("a-layout-content",[a("div",{staticClass:"content-body padding-lr-sm"},[a("a-form-model",{ref:"form",attrs:{layout:"vertical",model:e.uploadForm}},[a("a-form-model-item",{attrs:{label:"",prop:"url"}},[e.uploadModal.visible?a("batch-upload",{attrs:{data:{id:1}},on:{change:e.handleChange}}):e._e()],1)],1)],1)])],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("a-button",{attrs:{type:"primary",loading:e.submit_loading},on:{click:e.handleUpload}},[e._v("创建")]),a("a-button",{staticClass:"margin-right-sm",on:{click:e.closeUploadDialog}},[e._v("关闭")])],1)])],1)},w=[],x=(a("a15b"),a("ade3"));function F(e){throw new Error('"'+e+'" is read-only')}a("b2a3"),a("a54e");var E=a("92fa"),$=a.n(E),L=a("6042"),D=a.n(L),T=a("4d91"),A=a("0c63"),j=a("94eb"),O=a("0464"),I=a("a9d4"),P=a("daa3"),q=a("b488"),M=a("4df5"),V=a("6a21"),z=["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"],R=new RegExp("^("+z.join("|")+")(-inverse)?$"),U={name:"ATag",mixins:[q["a"]],model:{prop:"visible",event:"close.visible"},props:{prefixCls:T["a"].string,color:T["a"].string,closable:T["a"].bool.def(!1),visible:T["a"].bool,afterClose:T["a"].func},inject:{configProvider:{default:function(){return M["a"]}}},data:function(){var e=!0,t=Object(P["k"])(this);return"visible"in t&&(e=this.visible),Object(V["a"])(!("afterClose"in t),"Tag","'afterClose' will be deprecated, please use 'close' event, we will remove this in the next version."),{_visible:e}},watch:{visible:function(e){this.setState({_visible:e})}},methods:{setVisible:function(e,t){this.$emit("close",t),this.$emit("close.visible",!1);var a=this.afterClose;a&&a(),t.defaultPrevented||Object(P["r"])(this,"visible")||this.setState({_visible:e})},handleIconClick:function(e){e.stopPropagation(),this.setVisible(!1,e)},isPresetColor:function(){var e=this.$props.color;return!!e&&R.test(e)},getTagStyle:function(){var e=this.$props.color,t=this.isPresetColor();return{backgroundColor:e&&!t?e:void 0}},getTagClassName:function(e){var t,a=this.$props.color,n=this.isPresetColor();return t={},D()(t,e,!0),D()(t,e+"-"+a,n),D()(t,e+"-has-color",a&&!n),t},renderCloseIcon:function(){var e=this.$createElement,t=this.$props.closable;return t?e(A["a"],{attrs:{type:"close"},on:{click:this.handleIconClick}}):null}},render:function(){var e=arguments[0],t=this.$props.prefixCls,a=this.configProvider.getPrefixCls,n=a("tag",t),i=this.$data._visible,s=e("span",$()([{directives:[{name:"show",value:i}]},{on:Object(O["a"])(Object(P["j"])(this),["close"])},{class:this.getTagClassName(n),style:this.getTagStyle()}]),[this.$slots["default"],this.renderCloseIcon()]),o=Object(j["a"])(n+"-zoom",{appear:!1});return e(I["a"],[e("transition",o,[s])])}},B={name:"ACheckableTag",model:{prop:"checked"},props:{prefixCls:T["a"].string,checked:Boolean},inject:{configProvider:{default:function(){return M["a"]}}},computed:{classes:function(){var e,t=this.checked,a=this.prefixCls,n=this.configProvider.getPrefixCls,i=n("tag",a);return e={},D()(e,""+i,!0),D()(e,i+"-checkable",!0),D()(e,i+"-checkable-checked",t),e}},methods:{handleClick:function(){var e=this.checked;this.$emit("input",!e),this.$emit("change",!e)}},render:function(){var e=arguments[0],t=this.classes,a=this.handleClick,n=this.$slots;return e("div",{class:t,on:{click:a}},[n["default"]])}},H=a("db14");U.CheckableTag=B,U.install=function(e){e.use(H["a"]),e.component(U.name,U),e.component(U.CheckableTag.name,U.CheckableTag)};var G,J=U,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative"},[a("header",{staticClass:"padding-lr-sm padding-tb-xs flex align-center justify-between solid-bottom line-grey"},[a("bg-tag",{attrs:{active:!0}},[e._v("Asset")])],1),a("div",{staticClass:"flex justify-center margin-top-sm"},[a("a-pagination",{attrs:{showSizeChanger:"",showQuickJumper:"",total:e.total,showTotal:function(e){return"共 "+e+" 条"},pageSize:e.search.paginator.limit,defaultCurrent:1,pageSizeOptions:["10","30","50","100"]},on:{change:e.change,showSizeChange:e.showSizeChange}})],1),a("a-table",{attrs:{size:"middle",rowKey:"id",columns:e.columns,dataSource:e.data,loading:e.loading,pagination:!1,scroll:{x:1200,y:"calc(100vh - 10px)",scrollToFirstRowOnChange:!0}},scopedSlots:e._u([{key:"url",fn:function(t,n){return[n.type.indexOf("image")>-1?a("preview-image",{attrs:{src:t,height:"30px"}}):a("span",[e._v(e._s(t))])]}},{key:"action",fn:function(t){return[a("a",{on:{click:function(a){return e.selectItem(t)}}},[e._v("选择")])]}}])})],1)},Q=[],X=a("34d6"),W={name:"AssetPicker",props:{formName:{type:String,default:""},isMultiple:{type:Boolean,default:!1}},components:{BgTag:s["d"],PreviewImage:g["a"]},data:function(){var e=this,t=[{title:"文件名",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"预览",dataIndex:"url",scopedSlots:{customRender:"url"}},{title:"大小",dataIndex:"file_size"},{title:"上传时间",dataIndex:"created_at"},{title:"选择",key:"action",scopedSlots:{customRender:"action"}}],a={onChange:function(t,a){e.select_num=a.length},onSelect:function(t){e.$emit("selectChange",t,e.formName,e.isMultiple)}};return{rowSelection:a,columns:t,data:[],select_num:0,show_create:!1,total:30,search:{paginator:{page:1,limit:10}},loading:!1}},computed:{},mounted:function(){this.getList()},methods:{showSizeChange:function(e,t){this.search.paginator.limit=t,this.getList()},change:function(e,t){this.search.paginator.page=e,this.search.paginator.limit=t,this.getList()},getList:function(){var e=this,t=this;t.loading=!0,t.$apollo.query({query:X["userAssets"],variables:t.search,fetchPolicy:"no-cache",context:{uri:m["a"].projectUri+u["a"].state.common.currentProject.id}}).then((function(e){t.data=e.data.userAssets.items,t.total=e.data.userAssets.cursor.total,t.loading=!1})).catch((function(a){e.$message.warning(Object(d["a"])(a.message)),t.loading=!1}))},selectItem:function(e){this.$emit("selectChange",e,this.formName,this.isMultiple)}}},Y=W,Z=(a("f79b"),a("6756"),Object(C["a"])(Y,K,Q,!1,null,"b33eff16",null)),ee=Z.exports,te=a("1cf9");function ae(){var e=Object(l["a"])(["mutation "," ($data: ","Input!) { \n                "," (data: $data) {\n                  ","\n                }\n              }"]);return ae=function(){return e},e}function ne(){var e=Object(l["a"])(["query "," ($id: Int!, $code: String) {\n          "," (id: $id, code: $code) {\n            ","\n            }\n          }"]);return ne=function(){return e},e}var ie=(G={name:"UpdateContent",props:{custom:{}}},Object(x["a"])(G,"props",{dataForm:{type:Object,default:function(){return{}}},custom:{},model:{type:String,required:!0}}),Object(x["a"])(G,"components",{AreaUpload:s["a"],WangEditor:s["j"],AssetPicker:ee,Tag:J,ReferencePicker:s["h"],BatchUpload:s["c"]}),Object(x["a"])(G,"data",(function(){return{fileList:[],uploadForm:this.$form.createForm(this),submit_loading:!1,showOtherLanguage:!1,checkCode:"",checkList:[],form:{},enForm:{},fields:[],translateFields:[],fieldNames:[],customList:[],showEnglish:!1,rules:{title:[{required:!0,message:"必填",trigger:"blur"}]},assetModal:{title:"选择关联附件",visible:!1,width:"80%",item:{}},uploadModal:{title:"上传",visible:!1,width:"80%"},referenceModal:{title:"选择关联表",visible:!1,width:"80%",item:{}},formShow:!0,typeTexts:{ASSET:"Asset",REFERENCE:"Reference"}}})),Object(x["a"])(G,"computed",{}),Object(x["a"])(G,"mounted",(function(){this.getFieldList(),this.userTranslateFields()})),Object(x["a"])(G,"methods",{goSchema:function(){this.$router.push({name:"Schema"})},handleChange:function(e){this.fileList=e},getUserItemTranslate:function(){var e=this,t=this;t.enForm={};var a="user"+t.custom.name+"ItemTranslate",n=this.dataForm.id,i="";t.translateFields.forEach((function(e,t){i+=0==t?"".concat(e.name):",".concat(e.name)})),t.$apollo.query({query:h()(ne(),a,a,i),variables:{id:n,code:t.checkCode},fetchPolicy:"no-cache",context:{uri:m["a"].projectUri+u["a"].state.common.currentProject.id}}).then((function(e){t.enForm=e.data[a],delete t.enForm.__typename})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))},handleUpload:function(e){var t=this;e.preventDefault();var a=this;if(0!==this.fileList.length){var n=[];this.fileList.forEach((function(e){n.push({name:e.name,url:e.url,type:e.mime,file_size:e.size,is_system:"false"})})),a.$apollo.mutate({mutation:X["userCreateBatchAsset"],variables:{data:n},fetchPolicy:"no-cache",context:{uri:m["a"].projectUri+u["a"].state.common.currentProject.id}}).then((function(){a.closeUploadDialog(),a.fileList=[]})).catch((function(e){t.$message.warning(Object(d["a"])(e.message))}))}else this.$message.warning("请上传文件")},batchAdd:function(){this.showUploadDialog()},cancel:function(){this.$emit("cancel")},submit:function(){var e=this,t=this;this.$refs.createForm.validate((function(a){if(!a)return!1;var n={};t.fields.forEach((function(e){if("ASSET"==e.type||"REFERENCE"==e.type){var a=[];if(e.is_multiple){var i=t.form[e.name+t.typeTexts[e.type]];i&&i.length>0&&t.form[e.name+t.typeTexts[e.type]].forEach((function(e){a.push(e.id)})),n[e.name]=a}else{var s=t.form[e.name+t.typeTexts[e.type]];n[e.name]=s&&s.length>0?s[0].id:void 0}}else n[e.name]=t.form[e.name]}));var i="userCreate";t.form.id&&(i="userUpdate",n["id"]=t.form.id),i+=t.custom.name,t.enForm&&"{}"!==JSON.stringify(t.enForm)&&(n["translate"]=t.enForm),n["code"]=t.checkCode,t.$apollo.mutate({mutation:h()(ae(),i,t.custom.name,i,t.fieldNames.join(",")),variables:{data:n},fetchPolicy:"no-cache",context:{uri:m["a"].projectUri+u["a"].state.common.currentProject.id}}).then((function(){e.$emit("cancel")})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))}))},getFieldList:function(){var e=this,t=this;t.$apollo.query({query:c["userFields"],variables:{more:{custom_id:t.custom.id},paginator:{limit:100}},fetchPolicy:"no-cache"}).then((function(e){var a=e.data.userFields.items,n=[],i=[],s={};t.formShow=!1;var o=t.dataForm;a.forEach((function(e){if(n.push(e),i.push(e.name),e.is_mult_language&&(t.showOtherLanguage=!0),e.is_required){var a="请输入";"ASSET"!=e.type&&"REFERENCE"!=e.type||(a="请选择"),s[e.name]=[{type:"string",required:!0,message:a+e.zh_name,trigger:"blur"}]}if(o&&o.id&&("RICH_TEXT"==e.type&&(t.form[e.name]=""),t.form[e.name]=o[e.name],"ASSET"==e.type||"REFERENCE"==e.type)){var r=t.typeTexts[e.type],l=[];e.is_multiple?l=o[e.name+r]:o[e.name+r]&&(l=[o[e.name+r]]),t.form[e.name+r]=l}})),o&&o.id?t.form["id"]=o.id:t.form["id"]=void 0,t.rules=s,t.fields=n,t.fieldNames=i,t.formShow=!0})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))},userTranslateFields:function(){var e=this,t=this;t.$apollo.query({query:c["userTranslateFields"],variables:{more:{custom_id:t.custom.id},paginator:{limit:100}},fetchPolicy:"no-cache"}).then((function(e){var a=e.data.userTranslateFields.items;t.translateFields=a,t.getAllLanguages(),t.getCheckCode()})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))},getAllLanguages:function(){var e=this,t=this;t.$apollo.query({query:te["userLanguages"],variables:{},fetchPolicy:"no-cache"}).then((function(e){var a=e.data.userLanguages.items,n=[];a.forEach((function(e){n.push({value:e.code,label:e.language.name})})),t.customList=n})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))},getCheckCode:function(){var e=this,t=this;t.dataForm.id&&t.$apollo.query({query:te["userLanguageCode"],variables:{id:this.dataForm.id},fetchPolicy:"no-cache"}).then((function(e){e.data.userLanguageCode?(t.checkCode=e.data.userLanguageCode,t.checkCode&&t.checkList.push(t.checkCode),t.getUserItemTranslate(),t.showEnglish=!0):t.showEnglish=!1})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))},onChange:function(e){e.forEach((function(t,a){a!==e.length-1&&e.remove(t)})),this.checkList=e,e.length>0?(this.checkCode=e[0],this.showEnglish=!0):(this.checkCode="",this.showEnglish=!1)},richValueChange:function(e){var t=e[0],a=e[1];this.form[a]=t},richValueEnChange:function(e){var t=e[0],a=e[1];this.enForm[a]=t},showAssetDialog:function(e){this.assetModal.item=e,this.assetModal.visible=!0},closeAssetDialog:function(){this.assetModal.visible=!1},assetSelectChange:function(e,t,a){this.selectChange("asset",e,t,a)},removeAsset:function(e,t){var a=[],n=[];this.form[t+"Asset"].forEach((function(t){t.id!=e.id&&(a.push(t),e.is_multiple?n.push(t.id):n=t.id)})),this.form[t+"Asset"]=a,this.form[t]=n},removeReference:function(e,t){var a=[],n=[];this.form[t+"Reference"].forEach((function(t){t.id!=e.id&&(a.push(t),e.is_multiple?n.push(t.id):n=t.id)})),this.form[t+"Reference"]=a,this.form[t]=n},showReferenceDialog:function(e){this.referenceModal.item=e,this.referenceModal.visible=!0},closeReferenceDialog:function(){this.referenceModal.visible=!1},showUploadDialog:function(){this.fileList=[],this.assetModal.visible=!1,this.uploadModal.visible=!0},closeUploadDialog:function(){this.uploadModal.visible=!1,this.assetModal.visible=!0},selectChange:function(e,t,a,n){var i="";if(i="asset"==e?"Asset":"Reference",n){var s=!1;if(this.form[a+i]&&this.form[a+i].length>0&&this.form[a+i].forEach((function(e){e.id==t.id&&(s=!0)})),!s){if(this.form[a+i]&&this.form[a+i].length>0){this.form[a+i]||(this.form[a+i]=[]);var o=this.form[a+i];o||(F("assets"),o=[]),o.push(t),this.form[a+i]=o}else this.form[a+i]=[t];if(n){var r=this.form[a];r||(F("assets"),r=[]),r.push(t.id),this.form[a]=r}else this.form[a]=t.id}this.$refs.createForm.clearValidate()}else{if(this.form[a+i]=[t],n){var l=this.form[a];l||(F("assets"),l=[]),l.push(t.id),this.form[a]=l}else this.form[a]=t.id;this.$refs.createForm.clearValidate(),"asset"==e?this.closeAssetDialog():this.closeReferenceDialog()}},referenceSelectChange:function(e,t,a){this.selectChange("reference",e,t,a)},formValueChange:function(){this.form=Object.assign({},this.form)},enFormValueChange:function(){this.enForm=Object.assign({},this.enForm)}}),G),se=ie,oe=(a("b904"),Object(C["a"])(se,N,w,!1,null,"4541ac77",null)),re=oe.exports,le=a("21b3"),ce={components:{UpdateContent:re,Contents:_,BasePage:s["b"]},data:function(){return{content:{id:1},show_list:!1,selectedTags:[],customs:[],selectCustom:null,show_update:!1,show_models:!0,models_height:"0px",categories:[],openKeys:[]}},computed:{toggleDirection:function(){return this.show_models?"down":"right"}},mounted:function(){this.getCustomList()},methods:{getCustomList:function(){var e=this,t=this;t.$apollo.query({query:le["userCategoryList"],variables:{},fetchPolicy:"no-cache"}).then((function(e){t.categories=e.data.userCategories.items;var a=[];t.categories.forEach((function(e){a.push(e.id)})),t.openKeys=a})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))},menuClick:function(e){this.selectCustom=null,this.show_list=!1,this.show_update=!1;var t=this;setTimeout((function(){var a=null;t.categories.forEach((function(t){t.customs.forEach((function(t){t.id===e.key&&(a=t)}))})),t.selectCustom=a,t.show_list=!0}),100)},cancelUpdate:function(){this.show_update=!1,this.show_list=!0},update:function(e){this.show_list=!1,this.content=e?e||{}:void 0;var t=this;setTimeout((function(){t.show_update=!0}),100)}}},de=ce,ue=(a("8816"),Object(C["a"])(de,n,i,!1,null,"042fbfaa",null));t["default"]=ue.exports},"4f4b":function(e,t,a){"use strict";var n=a("38ae"),i=a.n(n);i.a},"581c":function(e,t,a){"use strict";var n=a("ac79"),i=a.n(n);i.a},6756:function(e,t,a){"use strict";var n=a("acba"),i=a.n(n);i.a},"75b0":function(e,t,a){},"818d":function(e,t,a){},8816:function(e,t,a){"use strict";var n=a("75b0"),i=a.n(n);i.a},a15b:function(e,t,a){"use strict";var n=a("23e7"),i=a("44ad"),s=a("fc6a"),o=a("a640"),r=[].join,l=i!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(e){return r.call(s(this),void 0===e?",":e)}})},a54e:function(e,t,a){},ac79:function(e,t,a){},acba:function(e,t,a){},b7d2:function(e,t,a){},b904:function(e,t,a){"use strict";var n=a("818d"),i=a.n(n);i.a},f79b:function(e,t,a){"use strict";var n=a("b7d2"),i=a.n(n);i.a}}]);