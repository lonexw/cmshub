(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34235e91"],{"21b3":function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userCategories"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCategories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userCategoryList"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCategories"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"customs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"zh_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plural_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"category_id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"userCategory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCategory"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreateCategory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CategoryInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreateCategory"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userUpdateCategory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"data"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CategoryInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdateCategory"},arguments:[{kind:"Argument",name:{kind:"Name",value:"data"},value:{kind:"Variable",name:{kind:"Name",value:"data"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:614}};i.loc.source={body:"query userCategories {\n  userCategories {\n    items {\n      id,\n      title\n    }\n  }\n}\n\nquery userCategoryList {\n  userCategories {\n    items {\n      id\n      title\n      customs {\n        id\n        name\n        zh_name\n        plural_name\n        description\n        category_id\n      }\n    }\n  }\n}\n\nquery userCategory ($id: Int!) {\n  userCategory (id: $id) {\n    id\n    title\n  }\n}\n\nmutation userCreateCategory($data: CategoryInput!) {\n  userCreateCategory(data: $data) {\n    id,\n    title\n  }\n}\n\nmutation userUpdateCategory($data: CategoryInput!) {\n  userUpdateCategory(data: $data) {\n    id,\n    title\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){a(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){a(e,t)})),e.definitions&&e.definitions.forEach((function(e){a(e,t)}))}var n={};function r(e,t){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==t)return a}}function o(e,t){var i={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=n[t]||new Set,o=new Set,s=new Set;a.forEach((function(e){s.add(e)}));while(s.size>0){var l=s;s=new Set,l.forEach((function(e){if(!o.has(e)){o.add(e);var t=n[e]||new Set;t.forEach((function(e){s.add(e)}))}}))}return o.forEach((function(t){var a=r(e,t);a&&i.definitions.push(a)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var t=new Set;a(e,t),n[e.name.value]=t}}))})(),e.exports=i,e.exports["userCategories"]=o(i,"userCategories"),e.exports["userCategoryList"]=o(i,"userCategoryList"),e.exports["userCategory"]=o(i,"userCategory"),e.exports["userCreateCategory"]=o(i,"userCreateCategory"),e.exports["userUpdateCategory"]=o(i,"userUpdateCategory")},3312:function(e,t,i){"use strict";var a=i("dc355"),n=i.n(a);n.a},b619:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("base-page",{attrs:{title:"模型管理"},scopedSlots:e._u([{key:"sider",fn:function(){return[i("div",{staticClass:"flex justify-between align-center"},[i("bg-tag",{staticClass:"text-blue text-sm",nativeOn:{click:function(t){return e.showCreate(t)}}},[i("a-icon",{attrs:{type:"plus"}}),e._v(" 添加模型")],1),i("bg-tag",{staticClass:"text-blue text-sm",nativeOn:{click:function(t){return e.showCategoryCreate(t)}}},[i("a-icon",{attrs:{type:"plus"}}),e._v(" 添加分类")],1)],1),i("div",{ref:"models",class:(e.show_models?"":"hidden")+" margin-top-xs models"},e._l(e.categories,(function(t){return i("a-menu",{key:t.id,attrs:{"default-open-keys":e.openKeys,mode:"inline"}},[i("a-sub-menu",{key:t.id},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),e._l(t.customs,(function(t){return i("a-menu-item",{key:t.id,on:{click:e.menuClick}},[e._v(" "+e._s(t.zh_name)+" ")])}))],2)],1)})),1)]},proxy:!0},{key:"content",fn:function(){return[e.init?i("div",{staticClass:"text-center",staticStyle:{"margin-top":"200px"}},[i("h1",{staticClass:"text-xxxl"},[e._v("开启项目")]),i("h1",{staticClass:"text-xxxl"},[e._v("创建第一个 模型")]),i("a-button",{attrs:{type:"primary",size:"large"},on:{click:e.showCreate}},[i("a-icon",{attrs:{type:"plus"}}),e._v("创建 模型")],1)],1):e._e(),i("update-model",{attrs:{visible:e.show_create,id:e.updateId},on:{cancel:function(t){return e.cancelCreate(t)}}}),i("update-category",{attrs:{visible:e.show_category_create,id:e.updateCategoryId},on:{cancel:function(t){return e.cancelCategoryCreate(t)}}})]},proxy:!0}])})},n=[],r=(i("4160"),i("159b"),i("2af9")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-modal",{attrs:{title:(this.id?"编辑":"创建")+"模型",visible:e.visible,footer:null,maskClosable:!1},on:{cancel:e.cancel}},[i("a-form-model",{ref:"createForm",attrs:{layout:"vertical",model:e.form,rules:e.rules}},[i("a-form-model-item",{attrs:{label:"展示名称",prop:"zh_name"}},[i("div",{staticClass:"text-sm text-gray margin-bottom-xs"},[e._v(" 项目中将展示这个名称（中文、字母、数字、下划线） ")]),i("a-input",{attrs:{placeholder:"请输入展示名称"},model:{value:e.form.zh_name,callback:function(t){e.$set(e.form,"zh_name",t)},expression:"form.zh_name"}})],1),i("a-form-model-item",{attrs:{label:"API ID",prop:"name"}},[i("div",{staticClass:"text-sm text-gray margin-bottom-xs"},[e._v(" 用于通过 API 访问此模型的 ID（字母、数字、下划线，字母开头） ")]),i("a-input",{attrs:{placeholder:"请输入 API ID"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("a-form-model-item",{attrs:{label:"API ID 复数形式",prop:"plural_name"}},[i("div",{staticClass:"text-sm text-gray margin-bottom-xs"},[e._v(" API ID 复数形式（字母、数字、下划线，字母开头） ")]),i("a-input",{attrs:{placeholder:"API ID 复数形式"},model:{value:e.form.plural_name,callback:function(t){e.$set(e.form,"plural_name",t)},expression:"form.plural_name"}})],1),i("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[i("a-input",{attrs:{type:"textarea",placeholder:"请输入描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),i("a-form-model-item",{attrs:{label:"所属分类",prop:"category_id"}},[i("a-select",{model:{value:e.form.category_id,callback:function(t){e.$set(e.form,"category_id",t)},expression:"form.category_id"}},e._l(e.categories,(function(t){return i("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.title)+" ")])})),1)],1),i("a-form-model-item",{staticClass:"text-right",staticStyle:{"margin-bottom":"0"}},[i("a-button",{staticClass:"margin-right-sm",on:{click:e.cancel}},[e._v(" 取消 ")]),i("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 确认 ")])],1)],1)],1)],1)},s=[],l=(i("a4d3"),i("e01a"),i("b0c0"),i("a9e3"),i("d3b7"),i("f9eb")),c=i("21b3"),d=i("ca00"),u={name:"UpdateModel",props:{visible:{type:Boolean,required:!0},id:{type:Number,default:0}},components:{},data:function(){return{form:{},rules:{zh_name:[{required:!0,message:"请输入展示名称",trigger:"blur"}],name:[{required:!0,message:"请输入 API ID",trigger:"blur"}],plural_name:[{required:!0,message:"请输入 API ID 的复数形式",trigger:"blur"}],category_id:[{required:!0,message:"请选择分类",trigger:"blur"}]},categories:[]}},watch:{id:function(e){e&&this.getCustom()}},computed:{},mounted:function(){this.id&&this.getCustom()},methods:{cancel:function(){this.$emit("cancel")},submit:function(){var e=this;this.$refs.createForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$apollo.mutate({mutation:e.id?l["userUpdateCustom"]:l["userCreateCustom"],variables:{data:e.form},fetchPolicy:"no-cache"}).then((function(){e.$emit("cancel",!0)})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))})).finally((function(){e.submit_loading=!1}))}))},getCustom:function(){var e=this;this.getCategories();var t=this;t.$apollo.query({query:l["userCustom"],variables:{id:t.id},fetchPolicy:"no-cache"}).then((function(e){var i=e.data.userCustom;t.form={id:i.id,name:i.name,zh_name:i.zh_name,description:i.description,plural_name:i.plural_name,category_id:i.category_id+""}})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))},getCategories:function(){var e=this,t=this;t.$apollo.query({query:c["userCategories"],variables:{},fetchPolicy:"no-cache"}).then((function(e){t.categories=e.data.userCategories.items})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))}}},m=u,f=i("2877"),g=Object(f["a"])(m,o,s,!1,null,"5bd9de3c",null),v=g.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-modal",{attrs:{title:(this.id?"编辑":"创建")+"分类",visible:e.visible,footer:null,maskClosable:!1},on:{cancel:e.cancel}},[i("a-form-model",{ref:"createForm",attrs:{layout:"vertical",model:e.form,rules:e.rules}},[i("a-form-model-item",{attrs:{label:"名称",prop:"title"}},[i("a-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),i("a-form-model-item",{staticClass:"text-right",staticStyle:{"margin-bottom":"0"}},[i("a-button",{staticClass:"margin-right-sm",on:{click:e.cancel}},[e._v(" 取消 ")]),i("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 确认 ")])],1)],1)],1)],1)},h=[],y={name:"UpdateCategory",props:{visible:{type:Boolean,required:!0},id:{type:Number,default:0}},components:{},data:function(){return{form:{},rules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}]},categories:[]}},watch:{id:function(e){e&&this.getCategory()}},computed:{},mounted:function(){this.id&&this.getCategory()},methods:{cancel:function(){this.$emit("cancel")},submit:function(){var e=this;this.$refs.createForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.$apollo.mutate({mutation:e.id?c["userUpdateCategory"]:c["userCreateCategory"],variables:{data:e.form},fetchPolicy:"no-cache"}).then((function(){e.$emit("cancel",!0)})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))})).finally((function(){e.submit_loading=!1}))}))},getCategory:function(){var e=this,t=this;t.$apollo.query({query:c["userCategory"],variables:{id:t.id},fetchPolicy:"no-cache"}).then((function(e){var i=e.data.userCategory;t.form={id:i.id,title:i.title}})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))}}},k=y,b=Object(f["a"])(k,p,h,!1,null,"3547d6d4",null),C=b.exports,_={components:{BasePage:r["b"],BgTag:r["d"],UpdateModel:v,UpdateCategory:C},data:function(){return{init:!1,show_models:!0,show_create:!1,show_category_create:!1,updateId:void 0,updateCategoryId:void 0,models_height:"0px",categories:[],openKeys:[]}},computed:{toggleDirection:function(){return this.show_models?"down":"right"}},mounted:function(){this.getCustomList()},methods:{toggleModels:function(){this.show_models=!this.show_models,this.$refs.models.style.height=this.show_models?this.models_height:"0px"},showCreate:function(){this.show_create=!0},showCategoryCreate:function(){this.show_category_create=!0},cancelCreate:function(e){this.show_create=!1,e&&this.getCustomList()},cancelCategoryCreate:function(e){this.show_category_create=!1,e&&this.getCustomList()},menuClick:function(e){var t=this;t.updateId=parseInt(e.key),t.show_create=!0},getCustomList:function(){var e=this,t=this;t.$apollo.query({query:c["userCategoryList"],variables:{},fetchPolicy:"no-cache"}).then((function(e){t.categories=e.data.userCategories.items;var i=[];t.categories.forEach((function(e){i.push(e.id)})),t.openKeys=i})).catch((function(t){e.$message.warning(Object(d["a"])(t.message))}))}}},S=_,N=(i("3312"),Object(f["a"])(S,a,n,!1,null,"f31de58a",null));t["default"]=N.exports},dc355:function(e,t,i){},e01a:function(e,t,i){"use strict";var a=i("23e7"),n=i("83ab"),r=i("da84"),o=i("5135"),s=i("861d"),l=i("9bf2").f,c=i("e893"),d=r.Symbol;if(n&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};c(m,d);var f=m.prototype=d.prototype;f.constructor=m;var g=f.toString,v="Symbol(test)"==String(d("test")),p=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=g.call(e);if(o(u,e))return"";var i=v?t.slice(7,-1):t.replace(p,"$1");return""===i?void 0:i}}),a({global:!0,forced:!0},{Symbol:m})}}}]);